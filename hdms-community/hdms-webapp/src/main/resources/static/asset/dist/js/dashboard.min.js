/*! Hdms - v0.1.0 - 2019-03-28 Copyright www.honvay.com */
"use strict";var dashboard=angular.module("dashboard",["ngAnimate","ngResource","ui.router","ui.bootstrap","ui.validate","pascalprecht.translate","messager","toaster","hc.ui","hc.util","ui.jq"]);dashboard.config(["$controllerProvider","$compileProvider","$filterProvider","$provide",function(t,n,e,r){dashboard.controller=t.register,dashboard.filter=e.register,dashboard.factory=r.factory,dashboard.service=r.service,dashboard.constant=r.constant,dashboard.value=r.value}]),window.require&&function(t){"function"==typeof define&&define.amd?(require.config({paths:{dashboard:"/asset/src/dashboard"},urlArgs:"_dc="+(new Date).getTime()}),define(["dashboard/dashboard.config","dashboard/controllers/dashboard","dashboard/controllers/index","dashboard/controllers/security","dashboard/controllers/system","dashboard/controllers/department","dashboard/controllers/user"],t)):t()}(function(){}),dashboard.config(["$translateProvider",function(t){t.useStaticFilesLoader({prefix:"/asset/l10n/",suffix:".json"}),t.preferredLanguage("zh_CN")}]).config(["$httpProvider",function(t){var n={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"};n[crsf.headerName]=crsf.token,t.defaults.headers.post=n,t.defaults.headers.get={"X-Requested-With":"XMLHttpRequest"}}]),dashboard.run(["$rootScope","$state","$stateParams",function(t,n,e){t.$state=n,t.$stateParams=e}]).config(["$stateProvider","$urlRouterProvider",function(t,n){n.otherwise("/index"),t.state("/index",{url:"/index",templateUrl:"asset/tpl/dashboard/index.html",controller:"IndexCtrl"}).state("organization",{url:"/organization",templateUrl:"asset/tpl/dashboard/organization/organization.html"}).state("security",{url:"/security",template:'<div ui-view class="app-view fade-in-up"></div>'}).state("security.loginLog",{url:"/login/log",templateUrl:"asset/tpl/dashboard/security/login_log.html"}).state("security.activity",{url:"/activity",templateUrl:"asset/tpl/dashboard/security/activity.html"}).state("sys",{abstract:!0,url:"/sys",template:'<div ui-view class="app-view"></div>'}).state("sys.setting",{url:"/setting",templateUrl:"asset/tpl/dashboard/system/setting.html"}).state("sys.task",{url:"/task",templateUrl:"asset/tpl/dashboard/system/task.html"}).state("sys.notice",{url:"/notice",templateUrl:"asset/tpl/dashboard/system/notice.html"})}]),angular.module("lc.atwho",[]).directive("lcAtwho",["$parse","$filter","emojis","$rootScope","bus","$translate","lcData","LinkModuleService","$http","$q",function(t,n,e,r,s,a,i,l,o,c){return{require:"^ngModel",scope:!0,link:function(i,o,c){var d=t(c.atwhoKeydown),p={emojis:!0,member:!0,channel:!0,entity:!0};c.lcAtwho&&(p=$.extend(p,i.$eval(c.lcAtwho))),p.emojis&&o.atwho({at:":",data:e,show_the_at:!0,tpl:"<li data-value=':${name}:'><img width='24' height='24' src='"+appGlobal.config.cdnRoot+"image/emoji/${name}.png' class='emoji' /> ${name}</li>",callbacks:{keydown:function(t,n){d&&!n&&i.$apply(function(){d(i,{$event:t})})}}}),p.entity&&l.bindAtWho(o,c.channels&&p.channel),c.atwhoMembers&&p.member&&i.$watch(c.atwhoMembers,function(t,e){var i=_.reject(t,function(t){return t.uid===r.global.me.uid});if(i=s.member.filterBot(i,!0),_.isEmpty(i))o.atwho({at:"@",data:[]});else{_.forEach(i,function(t){0===t.state?t.lc_state='<span class="fa fa-circle lc-state offline"></span>':1===t.state?t.lc_state='<span class="fa fa-circle lc-state online"></span>':2===t.state?t.lc_state='<span class="fa fa-minus-circle lc-state busy"></span>':3===t.state&&(t.lc_state='<span class="fa fa-dot-circle-o lc-state away"></span>')}),c.hasGroup&&i.push({name:"group",display_name:a.instant("atwho.GROUP"),display_name_pinyin:"all"});var l=["<li data-value='@${name} '>","<div title='${display_name}' class='lc-avatar lc-avatar-30'>","<span class='lc-avatar-def m-l-10 m-r-5' style='background-color:${bgColor};'><div>${shortName}</div></span></div>&nbsp;","${display_name}"," <small>(${name})</small>","</li>"].join(""),d='<li data-value="@${display_name} " title="@${display_name}" class="channel">@${display_name} <small>('+a.instant("atwho.NOTICE_ALL")+")</small></li>";o.atwho({at:"@",limit:1e4,header_tpl:'<div class="header">'+a.instant("atwho.MEMBER")+"<small>↑&nbsp;↓&nbsp;"+a.instant("atwho.NAVIGATION")+"</small></div>",data:i,tpl:["<li data-value='@${name} '>","<a href title='${display_name}' class='lc-avatar lc-avatar-30'>","<img src='"+appGlobal.config.box.avatarUrl+"${avatar}' class='m-l-10'/></a>&nbsp; ","${display_name}"," <small>(${name})</small>","</li>"].join(""),search_key:"display_name",callbacks:{filter:function(t,n,e){if(_.isEmpty(t))return n;if(_.isEmpty(n))return n;var r=t.toLowerCase();return _.filter(n,function(t){return t.display_name.toLowerCase().indexOf(r)>-1||t.display_name_pinyin.toLowerCase().indexOf(r)>-1||t.name.toLowerCase().indexOf(r)>-1})},sorter:function(t,n,e){return n},tpl_eval:function(t,e){var r=null;if("group"===e.name)r=d.replace(/\$\{([^\}]*)\}/g,function(t,n,r){return e[n]});else if(e.avatar&&"default_avatar.png"!=e.avatar&&"default.png"!=e.avatar)r=t.replace(/\$\{([^\}]*)\}/g,function(t,n,r){return t.indexOf("avatar")>0?e[n].replace(".","_40x40."):e[n]});else{var s=e.display_name.substring(0,1).toLocaleUpperCase();e.firstText=s,e.shortName=n("avatarShortName")(e.display_name),e.bgColor=n("avatarBgColor")(e.display_name)["background-color"],r=l.replace(/\$\{([^\}]*)\}/g,function(t,n,r){return e[n]})}return r}}})}},!0),c.channels&&p.channel&&i.$watch(c.channels,function(t){return _.isEmpty(t)?void o.atwho({at:"#g:",data:[]}):void o.atwho({at:"#g:",limit:1e4,data:t,tpl:'<li data-value="#${name} " title="#${name}" class="channel"><i class="lcfont lc-link-group"></i>${name}</li>',header_tpl:"<div class='header'>"+a.instant("atwho.GROUP")+"<small>↑&nbsp;↓&nbsp;"+a.instant("atwho.NAVIGATION")+"</small></div>",callbacks:{filter:function(t,n,e){return _.isEmpty(t)?n:_.isEmpty(n)?n:_.filter(n,function(n){return n.name_pinyin.toLowerCase().indexOf(t.toLowerCase())>-1||n.name.toLowerCase().indexOf(t.toLowerCase())>-1})},sorter:function(t,n,e){return n}}})},!0)}}}]).directive("lcCommand",["lcData","$translate","MessageDataContext",function(t,n,e){return{require:"^ngModel",link:function(r,s,a){r.$watch(a.lcCommand,function(t,e){var r=_.sortBy(t,function(t){return t.name});r=_.filter(r,function(t){return!t.service_id||t.service_id&&t.show_in_list});var a="<li data-value='${name}' class='command'>${name} ${usage_hint} <span class='desc'>"+n.instant("atwho.CUSTOM")+"${desc}</span></li>";s.atwho({at:"/",data:r,show_the_at:!0,limit:1e4,tpl:"<li data-value='${name}' class='command'>${name} ${usage_hint} <span class='desc'>${desc}</li>",header_tpl:"<div class='header'>"+n.instant("atwho.COMMAND")+"<small>↑&nbsp;↓&nbsp;"+n.instant("atwho.NAVIGATION")+"</small></div>",callbacks:{matcher:function(t,n){var e,r;return t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t="(?:^|\\s)"+t,r=new RegExp(t+"([A-Za-z0-9_+-.]*)$|"+t+"([^-ÿ]*)$","gi"),(e=r.exec(n))?e[2]||e[1]:null},filter:function(t,n){return _.isEmpty(t)?n:_.isEmpty(n)?n:_.filter(n,function(n){var e=n.usage_hint.toLowerCase();return n.name.toLowerCase(),e.indexOf(t.toLowerCase())>-1||n.name.toLowerCase().indexOf(t.toLowerCase())>-1})},tpl_eval:function(t,n){return(n.desc&&!n.type?a:t).replace(/\$\{([^\}]*)\}/g,function(t,e,r){return n[e]})},sorter:function(t,n,e){return n}}})},!0),r.$on("$addCommand",function(n,r){r.isShow?t.integration.getCommand(r.service_id).success(function(t){if(_.find(e.data.commands,function(t){return t.service_id==r.service_id}))for(var n=0;n<e.data.commands.length;n++)e.data.commands[n].service_id===t.data.service_id&&(e.data.commands[n]=t.data);else e.data.commands.push(t.data)}).error(function(t){}):_.remove(e.data.commands,function(t){return t.service_id==r.service_id})})}}}]),dashboard.controller("DashboardCtrl",["$rootScope","$scope","$translate","$window","toaster",function(t,n,e,r,s){n.user=user,t.toaster=s,t.resourceServerUrl="/",t.staticResourceServerUrl="/"}]),angular.element(document).ready(function(){angular.bootstrap(document,["dashboard"])}),dashboard.controller("OrganizationCtrl",["$scope","$http","Messager","$modal",function(t,n,e,r){function s(t){angular.element("#departmentMenu").hide()}t.tree={},t.status={},t.onSelectionChange=function(n){t.current=n,t.loadUser()},t.onTreeInit=function(){var n=t.tree.getRoot();t.tree.select(n.children[0])},t.onTreeOptionClick=function(n,e){e.stopPropagation();var r=angular.element("#departmentMenu");r.css({top:e.pageY,left:e.pageX}),r.show(),t.selected=n},$(window).on("click",function(t){s()}),t.$on("$destroy",function(){$(window).unbind("click",s)}),t.addDepartment=function(){var n=t.selected;t.open({tpl:"asset/tpl/dashboard/organization/department_form.html",ctrl:"DepartmentCtrl",data:{parent:n},success:function(){t.tree.reload(n)}})},t.editDepartment=function(){var n=t.selected;t.open({tpl:"asset/tpl/dashboard/organization/department_form.html",ctrl:"DepartmentCtrl",data:{id:n.id},success:function(n){if(n.oldParent&&n.newParent)if(n.oldParent.id!==n.newParent){var e=t.tree.get(n.oldParent.id);t.tree.reload(e);r=t.tree.get(n.newParent.id);t.tree.reload(r)}else if(n.newParent&&!n.oldParent){var r=t.tree.get(n.newParent.id);t.tree.reload(r)}else(s=t.tree.get(n.department.id)).name=n.department.name;else{var s=t.tree.get(n.department.id);s.name=n.department.name}}})},t.deleteDepartment=function(){var r=t.selected,s=t.toaster.wait("正在删除...");e.confirm("提示","确定要删除?").then(function(e){n.post("/department/delete",{id:r.id}).success(function(n,e,a,i){n.success?(s.doSuccess("删除成功"),t.tree.remove(r)):s.doError("刪除失败："+n.message)}).error(function(t){s.doError("刪除失败，稍候再试")})})},t.loadUser=function(){t.status.loading=!0,t.$broadcast("beforeLoadUsers"),t.users=null,n.get("/user/findByDepartment",{params:{departmentId:t.current.id}}).success(function(n,e,r,s){t.status.loading=!1,n.success?t.users=n.data:t.status.error="获取用户列表失败："+n.message}).error(function(n,e){t.status.loading=!1,t.status.error="获取用户列表失败："+(n.message||e)})},t.open=function(t){r.open({templateUrl:t.tpl,controller:t.ctrl,backdrop:"static",resolve:{data:function(){return t.data}}}).result.then(function(n){angular.isFunction(t.success)&&t.success(n)},function(){})}}]),dashboard.controller("DepartmentCtrl",["$scope","$http","data","$modalInstance","Messager",function(t,n,e,r,s){t.showResult=!1,t.operation="添加",t.department={},null!=e.id?(n.get("/department/get/"+e.id).success(function(n){t.department=n.data,t.oldParent=t.department.parent}),t.operation="编辑"):t.department={parent:{id:e.parent.id,name:e.parent.name}},t.onSelect=function(n){var e=t.department.parent;e&&e.id===n.id||(t.department.parent={id:n.id,name:n.name,code:n.code},t.departmentForm.$setDirty())},t.save=function(){var e="/department/save";t.department.id&&(e="/department/update");var s=t.toaster.wait("正在保存...");n.post(e,t.department).success(function(n){n.success?(s.doSuccess("保存成功"),r.close({department:t.department,oldParent:t.oldParent,newParent:t.department.parent})):t.result=n}).error(function(n,e,r,s,a){t.result={success:!1,message:"保存失败:"+e}})},t.cancel=function(){t.departmentForm.$dirty?s.confirm("提示","您已经进行了修改，是否要关闭?").then(function(t){r.dismiss("cancel")},function(){}):r.dismiss("cancel")}}]),dashboard.controller("IndexCtrl",["$scope","$http","$state","toaster",function(t,n,e,r){t.report={sumOfSize:"-",countOfFile:"-"},n.get("/report").success(function(n){n.success?t.report=n.data:r.error("获取报表数据失败")}).error(function(){r.error("获取报表数据失败")}),t.getPercent=function(t){return Math.ceil(t.used/t.total*100)},t.getType=function(t){var n=t.used/t.total*100;return n<25?"success":n<50?"info":n<75?"warning":"danger"},t.getColor=function(t){var n=t.used/t.total*100;return n<25?"#27c24c":n<50?"#23b7e5":n<75?"#fad733":"#f05050"}}]),dashboard.controller("LoginLogCtrl",["$scope","$http","$state",function(t,n,e){t.load=function(){t.loading=!0,t.error=null,t.result=null,n.get("/login/log/search",{params:t.buildParam()}).success(function(n){t.loading=!1,!1===n.success&&(t.error=n.message),t.result=n.data,t.pagination.pages=Math.ceil(t.result.total/t.pagination.size)}).error(function(n,e){t.loading=!1,t.error=n.message||e})},t.reload=function(){t.pagination.page=1,t.load()},t.loadPage=function(n){t.pagination.page=n,t.load()},t.result={rows:[]},t.pagination={size:20,page:1,pages:0},t.onPageChange=function(){t.pagination.page>t.pagination.pages||t.reload()},t.condition={start:null,end:null,username:null,name:null},t.buildParam=function(){var n=t.condition.start,e=t.condition.end;return{size:t.pagination.size,page:t.pagination.page,startDate:n?moment(n).format("YYYY-MM-DD")+" 00:00:00":null,endDate:e?moment(e).format("YYYY-MM-DD")+" 23:59:59":null,username:t.condition.username,name:t.condition.name}},t.load()}]),dashboard.controller("ActivityCtrl",["$scope","$http","$state","$element",function(t,n,e){t.load=function(){t.loading=!0,t.error=null,t.result=null,n.get("/activity/search",{params:t.buildParam()}).success(function(n){t.loading=!1,!1===n.success&&(t.error=n.message),t.result=n.data,t.pagination.pages=Math.ceil(t.result.total/t.pagination.size)}).error(function(n,e){t.loading=!1,t.error=n.message||e})},t.reload=function(){t.pagination.page=1,t.load()},t.loadPage=function(n){t.pagination.page=n,t.load()},t.result={rows:[]},t.pagination={size:20,page:1,pages:0},t.format=function(t){if(t.indexOf(":")<0)return t;vlaue.split(":");return"<a href='/fs' owner='_blank'></a>"},t.onPageChange=function(){t.pagination.page>t.pagination.pages||t.reload()},t.condition={start:null,end:null,operator:null,fileName:null,operation:null},t.buildParam=function(){var n=t.condition.start,e=t.condition.end;return{size:t.pagination.size,page:t.pagination.page,startDate:n?moment(n).format("YYYY-MM-DD")+" 00:00:00":null,endDate:e?moment(e).format("YYYY-MM-DD")+" 23:59:59":null,operatorName:t.condition.operator,documentName:t.condition.fileName,operation:t.condition.operation}},t.load()}]),dashboard.controller("SelectUserCtrl",["$rootScope","$scope","$http","$modal","$modalInstance","options",function(t,n,e,r,s,a){n.loading=!1,n.tree={},n.onTreeInit=function(){var t=n.tree.getRoot();n.tree.select(t)},n.multiple=a.multiple,n.clear=function(){n.searching=!1,n.condition=null},n.selected=[],n.selectedIds=[],n.select=function(t){n.selectedIds.indexOf(t.id)>=0||(!1===n.multiple&&(n.selected=[],n.selectedIds=[]),n.selected.push(t),n.selectedIds.push(t.id))},n.remove=function(t){n.selectedIds.indexOf(t.id)<0||(n.selected.splice(n.selected.indexOf(t),1),n.selectedIds.splice(n.selectedIds.indexOf(t.id),1))},n.search=function(){n.condition&&(n.searching=!0,n.loading=!0,e.get("/user/search",{params:{condition:n.condition}}).success(function(t,e,r,s){n.loading=!1,t.success?n.result=t.data:n.toaster.pop("error","提示",t.message)}).error(function(t,e){n.loading=!1,n.toaster.pop("error","提示","加载失败："+e)}))},n.ok=function(){s.close(n.selected)},n.loadUser=function(t){n.loading=!0,e.get("/user/list",{params:{departmentId:t.id}}).success(function(t,e,r,s){n.loading=!1,console.log(t),t.success?n.users=t.data:n.toaster.pop("error",t.message)}).error(function(t,e){n.loading=!1,n.toaster.pop("error","加载失败："+e)})},n.close=function(){s.dismiss("cancel")}}]),dashboard.controller("NoticeCtrl",["$scope","$http","Messager","$rootScope","$filter",function(t,n,e,r,s){function a(){var e=t.toaster.wait("正在加载通知");n.get("/notice").success(function(n,r,s,a){n.success?(e.doClose(),t.notice=n.data):e.doError("加载通知失败："+n.message)}).error(function(t,n){e.doError("加载通知失败："+(t.message||n))})}a(),t.save=function(){t.notice.startDate=s("date")(t.notice.startDate,"yyyy-MM-dd HH:mm:ss"),t.notice.endDate=s("date")(t.notice.endDate,"yyyy-MM-dd HH:mm:ss"),n.post("notice",t.notice).success(function(n,e,s,a){n.success?(t.settingForm.$setPristine(),t.settingForm.$setUntouched(),r.toaster.success("保存成功")):r.toaster.error("保存失败："+n.message)}).error(function(t,n){r.toaster.error("保存失败："+(t.message||n))})},t.reset=function(){t.settingForm.$setPristine(),t.settingForm.$setUntouched(),a()}}]),dashboard.controller("SettingCtrl",["$scope","$http","$state","$rootScope",function(t,n,e,r){function s(){n.get("/setting").success(function(t,n,e,s){t.success?a(t.data):r.toaster.pop("error","提示","加载安全配置失败："+data.message)}).error(function(){r.toaster.pop("error","提示","加载安全配置失败："+status.statusCode)})}function a(n){n.watermarkProperties&&Object.keys(t.watermarkProperties).forEach(function(e){n.watermarkProperties.indexOf(e)>=0&&(t.watermarkProperties[e]=!0)}),t.setting=n}t.watermarkProperties={name:!1,dept:!1,date:!1,time:!1,fileName:!1},s(),t.reset=function(){t.securitySettingForm.$setPristine(),t.securitySettingForm.$setUntouched(),s()},t.save=function(){t.setting.watermarkProperties="",Object.keys(t.watermarkProperties).forEach(function(n){!0===t.watermarkProperties[n]&&(t.setting.watermarkProperties+=n+";")}),n.post("/setting",t.setting).success(function(n,e,s,a){n.success?(t.securitySettingForm.$setPristine(),t.securitySettingForm.$setUntouched(),r.toaster.pop("success","提示","保存成功")):r.toaster.pop("error","提示","保存失败："+n.message)}).error(function(){r.toaster.pop("error","提示","保存设置失败："+status.statusCode)})}}]),dashboard.controller("UserCtrl",["$scope","$http","Messager","$modal",function(t,n,e,r){t.$on("beforeLoadUsers",function(){t.selected=null}),t.select=function(n){t.selected&&t.selected!==n&&(t.selected.selected=!1),!0!==n.selected?(n.selected=!0,t.selected=n):(n.selected=!1,t.selected=null)},t.addUser=function(){t.open({tpl:"asset/tpl/dashboard/organization/user_form.html",ctrl:"UserFormCtrl",data:{department:t.current},success:function(){t.loadUser()}})},t.operation=function(e,r,s){s.stopPropagation(),r.executing=!0;var a="/user/"+e+"/"+r.id,i=t.toaster.wait("正在执行...");n.post(a,{}).success(function(t){r.executing=!1,t.success?(i.doSuccess("操作成功"),r.status=t.data):i.doError("操作失败："+t.message)}).error(function(t,n){r.executing=!1,i.doError("操作失败："+(t.message||n))})},t.reset=function(r){e.confirm("提示","确定将该用户的密码重置为系统默认密码?").then(function(){var e=t.selected;e.executing=!0;var r="/user/reset/"+e.id,s=t.toaster.wait("正在重置密码...");n.post(r,{}).success(function(t){e.executing=!1,t.success?s.doSuccess("重置密码成功"):s.doError("重置密码失败："+t.message)}).error(function(t,n,r,a,i){e.executing=!1,s.doError("重置密码失败："+(t.message||n))})})},t.disable=function(n,r){e.confirm("提示","确定禁用该用户?").then(function(){t.operation("disable",n,r)})},t.enable=function(n,r){e.confirm("提示","确定启用该用户?").then(function(){t.operation("enable",n,r)})},t.lock=function(n,r){e.confirm("提示","确定锁定该用户?").then(function(){t.operation("lock",n,r)})},t.unlock=function(n,r){e.confirm("提示","确定解锁该用户?").then(function(){t.operation("unlock",n,r)})},t.setQuota=function(){t.selected;t.open({tpl:"asset/tpl/dashboard/organization/user_quota.html",ctrl:"UserQuotaCtrl",data:{user:t.selected},success:function(n){t.toaster.pop("success","调整配额成功")}})},t.transfer=function(){t.selected;t.open({tpl:"asset/tpl/dashboard/organization/user_transfer.html",ctrl:"UserTransferCtrl",data:{user:t.selected},success:function(t){}})},t.transferAdmin=function(r){t.selected.id!==t.user.id?e.confirm("提示","管理员权限移交后将会自动退出。确定要移交管理员权限？").then(function(){if(t.selected){var r={id:t.selected.id},s=t.toaster.wait("正在移交权限...");t.saving=!0,n.post("/user/admin/transfer",r).success(function(n){t.saving=!1,n.success?(s.doClose(),e.alert("提示","权限移交成功").then(function(){window.location.href="/logout"})):s.doError("权限移交失败："+n.message)}).error(function(n,e){t.saving=!1,s.doError("权限移交失败："+(n.message||e))})}}):e.alert("提示","不能移交给自己")},t.editUser=function(){var n=t.selected;t.open({tpl:"asset/tpl/dashboard/organization/user_form.html",ctrl:"UserFormCtrl",data:{id:n.id},success:function(n){t.loadUser()}})}}]),dashboard.controller("UserFormCtrl",["$scope","$http","data","$modalInstance","Messager",function(t,n,e,r,s){t.operation="添加",null!=e.id?(n.get("/user/get/"+e.id).success(function(n){t.user=n.data,t.user.department||delete t.user.department}),t.operation="编辑"):t.user={departmentId:e.department.id,departmentName:e.department.name},t.onSelect=function(n){var e=t.user.department;e&&e.id===n.id||(t.user.departmentId=n.id,t.user.departmentName=n.name,t.userForm.$setDirty())},t.save=function(){t.saving=!0;var e="/user/save";t.user.id&&(e="/user/update");var s=t.toaster.wait("正在保存...");n.post(e,t.user).success(function(n){t.saving=!1,n.success?(s.doSuccess("保存成功"),r.close(t.user)):(s.doError("保存失败："+n.message),t.result=n)}).error(function(n,e,r,a,i){s.doError("保存失败："+n.message),t.saving=!1,t.result={success:!1,message:"保存失败:"+e}})},t.cancel=function(){t.userForm.$dirty?s.confirm("提示","您已经进行了修改，是否要关闭?").then(function(t){r.dismiss("cancel")},function(){}):r.dismiss("cancel")}}]),dashboard.controller("UserQuotaCtrl",["$scope","$http","data","$modalInstance","Messager",function(t,n,e,r,s){t.user=e.user,t.save=function(){t.saving=!0,n.post("/user/set/quota",{id:t.user.id,quota:t.user.quota}).success(function(n){t.saving=!1,n.success?r.close():t.result=n}).error(function(n,e,r,s,a){t.saving=!1,t.result={success:!1,message:"保存失败:"+(n.message||e)}})},t.cancel=function(){t.userQutaoForm.$dirty?s.confirm("提示","您已经进行了修改，是否要关闭?").then(function(t){r.dismiss("cancel")},function(){}):r.dismiss("cancel")}}]),dashboard.controller("UserTransferCtrl",["$rootScope","$scope","$http","$modal","$modalInstance","data","Messager",function(t,n,e,r,s,a,i){n.loading=!1,n.tree={},n.user=a.user,n.onTreeInit=function(){var t=n.tree.getRoot();n.tree.select(t)},n.clear=function(){n.searching=!1,n.condition=null},n.select=function(t){n.selected=t},n.search=function(){n.condition&&(n.searching=!0,n.loading=!0,e.get("/user/search",{params:{condition:n.condition}}).success(function(t,e,r,s){n.loading=!1,t.success?n.result=t.users:n.toaster.pop("error","提示",t.message)}).error(function(t,e){n.loading=!1,n.toaster.pop("error","提示","加载失败："+e)}))},n.transfer=function(t){n.select(t),!n.selected.id==n.user.id&&n.ok()},n.ok=function(){i.confirm("提示","文档移交后不可恢复，请慎重操作。确定要进行文档？").then(function(){if(n.selected){var t={source:n.user.id,target:n.selected.id},r=n.toaster.wait("正在移交文档...");n.saving=!0,e.post("/fs/transfer",t).success(function(t){n.saving=!1,t.success?(r.doSuccess("文档移交成功"),s.close()):r.doError("文档移交失败："+t.message)}).error(function(t,e){n.saving=!1,r.doError("文档移交失败："+(t.message||e))})}})},n.loadUser=function(t){n.loading=!0,e.get("/user/list",{params:{departmentId:t.id}}).success(function(t,e,r,s){n.loading=!1,t.success?n.users=t.users:n.toaster.pop("error",t.message)}).error(function(t,e){n.loading=!1,n.toaster.pop("error","加载失败："+e)})},n.close=function(){s.dismiss("cancel")}}]),dashboard.controller("UserTransferAdminCtrl",["$rootScope","$scope","$http","$modal","$modalInstance","Messager",function(t,n,e,r,s,a){n.loading=!1,n.tree={},n.onTreeInit=function(){var t=n.tree.getRoot();n.tree.select(t)},n.clear=function(){n.searching=!1,n.condition=null},n.select=function(t){n.selected=t},n.search=function(){n.condition&&(n.searching=!0,n.loading=!0,e.get("/user/search",{params:{condition:n.condition}}).success(function(t,e,r,s){n.loading=!1,t.success?(a.alert("提示","您的管理权限已移交").then(function(){window.location.href="/login"}),n.result=t.users):n.toaster.pop("error","提示",t.message)}).error(function(t,e){n.loading=!1,n.toaster.pop("error","提示","加载失败："+e)}))},n.transfer=function(t){n.select(t),!n.selected.id==n.user.id&&n.ok()},n.ok=function(){a.confirm("提示","管理员权限移交后将会自动退出。确定要移交管理员权限？").then(function(){if(n.selected){var t={source:n.user.id,target:n.selected.id},r=n.toaster.wait("正在移交权限...");n.saving=!0,e.post("/user/transfer/admin",t).success(function(t){n.saving=!1,t.success?(r.doSuccess("权限移交成功"),s.close()):r.doError("权限移交失败："+t.message)}).error(function(t,e){n.saving=!1,r.doError("权限移交失败："+(t.message||e))})}})},n.loadUser=function(t){n.loading=!0,e.get("/user/list",{params:{departmentId:t.id}}).success(function(t,e,r,s){n.loading=!1,t.success?n.users=t.users:n.toaster.pop("error",t.message)}).error(function(t,e){n.loading=!1,n.toaster.pop("error","加载失败："+e)})},n.close=function(){s.dismiss("cancel")}}]),angular.module("dashboard").run(["$templateCache",function(t){t.put("asset/tpl/dashboard/index.html",'<div class=app-ctrl>\r\n    \r\n    <div class="bg-light lter b-b wrapper-md app-title-fixed">\r\n        <div class=row>\r\n            <div class="col-sm-6 col-xs-12">\r\n                <h1 class="m-n font-thin h3 text-black">控制台首页</h1>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n    <div class=wrapper-md>\r\n        \r\n        <div class="row row-sm text-center">\r\n            <div class=col-xs-3>\r\n                <div class="panel padder-v item">\r\n                    <div class="h1 text-primary font-thin h1">\r\n                        {{report.totalSize | formatSize}}\r\n                    </div>\r\n                    <span class="text-muted text-xs">总使用量</span>\r\n                </div>\r\n            </div>\r\n            <div class=col-xs-3>\r\n                <div href class="block panel padder-v item">\r\n                <span class="text-primary font-thin h1 block">\r\n                \t{{report.totalFile}}\r\n\t\t\t\t</span>\r\n                    <span class="text-muted text-xs">文件总数</span>\r\n                </div>\r\n            </div>\r\n            <div class=col-xs-3>\r\n                <div href class="block panel padder-v item">\r\n                <span class="text-primary font-thin h1 block">\r\n                \t{{report.totalUser}}\r\n\t\t\t\t</span>\r\n                    <span class="text-muted text-xs">用户总数</span>\r\n                </div>\r\n            </div>\r\n            <div class=col-xs-3>\r\n                <div href class="block panel padder-v item">\r\n                <span class="text-primary font-thin h1 block">\r\n                \t{{report.totalDepartment}}\r\n\t\t\t\t</span>\r\n                    <span class="text-muted text-xs">部门总数</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n        \r\n\r\n        <div class="row row-sm">\r\n            <div class="col-md-6 b-light">\r\n                <div class="panel wrapper">\r\n                    <h4 class="font-thin m-t-none m-b-md">磁盘统计</h4>\r\n                    <div class="row row-sm">\r\n                        <div class="col-xs-4 text-center" ng-repeat="space in report.spaces">\r\n                            <div ui-jq=easyPieChart ui-options="{\r\n                                    percent: {{getPercent(space)}},\r\n                                    lineWidth: 4,\r\n                                    trackColor: \'#e8eff0\',\r\n                                    barColor: \'{{getColor(space)}}\',\r\n                                    scaleColor: false,\r\n                                    size: 115,\r\n                                    lineCap: \'butt\'\r\n                                  }" class="inline m-t">\r\n                                <div>\r\n                                    <span class="text-primary h4">{{getPercent(space)}}%</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class="text-muted m-t m-b"><b>{{space.name}}</b>\r\n                                <div class="m-t-xs text-xs">{{space.used | formatSize}}/{{space.total | formatSize}}</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-6 b-light">\r\n                <div class="panel wrapper">\r\n                    <h4 class="font-thin m-t-none m-b-md">快速导航</h4>\r\n                    <div class=m-b>\r\n                        <div class=m-b ui-sref-active=active>\r\n                            <span class="label text-base bg-primary pos-rlt m-r text-white">\r\n                            <i class="arrow right arrow-primary"></i>首页</span>\r\n                            <a href=#/index class=auto ui-sref=index>首页</a>\r\n                        </div>\r\n                        <div class=m-b ui-sref-active=active>\r\n                            <span class="label text-base bg-primary pos-rlt m-r text-white">\r\n                            <i class="arrow right arrow-primary"></i>组织架构</span>\r\n                            <a href=#/organization class=auto ui-sref=organization>组织结构</a>\r\n                        </div>\r\n                        <div class=m-b>\r\n                            <span class="label text-base bg-primary pos-rlt m-r text-white">\r\n                            <i class="arrow right arrow-primary"></i>安全管理</span>\r\n                            <a href=#/security/login/log ui-sref=security.loginLog>\r\n                                <span>登录日志</span>\r\n                            </a>\r\n                            <a href=#/security/activity ui-sref=security.activity>\r\n                                <span>操作日志</span>\r\n                            </a>\r\n                        </div>\r\n                        <div class=m-b>\r\n                            <span class="label text-base bg-primary pos-rlt m-r text-white">\r\n                            <i class="arrow right arrow-primary"></i>系统管理</span>\r\n                            <a href=#/sys/setting ui-sref=sys.setting>\r\n                                <span>系统设置</span>\r\n                            </a>\r\n                            <a href=#/sys/notice ui-sref=sys.notice>\r\n                                <span>系统通知</span>\r\n                            </a>\r\n                        </div>\r\n                        <div class=m-b ui-sref-active=active>\r\n                            <span class="label text-base bg-primary pos-rlt m-r text-white">\r\n                            <i class="arrow right arrow-primary"></i>退出</span>\r\n                            <a href=/index class=auto>退出</a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n    </div>\r\n</div>'),t.put("asset/tpl/dashboard/organization/department_form.html",'<div class=m-c>\r\n    <div class=modal-header>\r\n        <h4 class=modal-title>{{operation}}部门</h4>\r\n    </div>\r\n    <div class="modal-body wrapper-lg">\r\n        <div class=row>\r\n            <div class=col-sm-12>\r\n                <form name=departmentForm class="form-horizontal form-validation">\r\n                    <div class=form-group>\r\n                        <label class="col-sm-3 control-label required">部门名称</label>\r\n                        <div class=col-sm-9>\r\n                            <input name=name ng-model=department.name required class=form-control>\r\n                        </div>\r\n                    </div>\r\n                    <div class=form-group>\r\n                        <label class="col-sm-3 control-label required">部门编号</label>\r\n                        <div class=col-sm-9>\r\n                            <input name=code ng-model=department.code required ng-minlength=2 class=form-control>\r\n                        </div>\r\n                    </div>\r\n                    <div class=form-group ng-if=department.parent>\r\n                        <label class="col-sm-3 control-label required">上级部门</label>\r\n                        <div class=col-sm-9>\r\n                            <div class=input-group dropdown is-open=openTree dropdown-toggle>\r\n                                <input required ng-model=department.parent.name readonly class=form-control>\r\n                                <div class=input-group-btn>\r\n                                    <button type=button class="btn btn-default dropdown-toggle">\r\n                                        <span class=caret></span>\r\n                                    </button>\r\n                                </div>\r\n                                <div class="dropdown-menu w-full">\r\n                                    <hc-tree tree-control=tree load-asyn=true open-folder-icon="fa fa-users" folder-icon="fa fa-users" leaf-icon="fa fa-users" on-selection-change=onSelect(selection); load-url=/department/list>\r\n                                    </hc-tree>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=form-group ng-show="invalid && changed">\r\n                        <div class="col-sm-12 m-t-md text-center">\r\n                            <span class="alert alert-danger" role=alert>不能移动到自身或者自身以下的部门</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=form-group>\r\n                        <label class="col-sm-3 control-label">排序号</label>\r\n                        <div class=col-sm-9>\r\n                            <input type=number name=orderNo ng-model=department.orderNo class=form-control>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group m-b-none" ng-show=result>\r\n                        <div class="col-sm-12 m-b-none">\r\n                            <div class="alert alert-danger" role=alert>{{result.message}}</div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=modal-footer style="text-align: right">\r\n        <button type=button class="btn btn-primary" ng-click=save() ng-disabled="departmentForm.$invalid || !departmentForm.$dirty">保存\r\n        </button>\r\n        <button type=button class="btn btn-default" ng-click=cancel()>取消</button>\r\n    </div>\r\n</div>'),t.put("asset/tpl/dashboard/organization/organization.html",'<div class="w-full h-full" ng-controller=OrganizationCtrl>\r\n<div class=app-ctrl style="padding-top: 67px">\r\n      <div class="bg-light lter b-b wrapper-md app-title-fixed">\r\n        <div class=row>\r\n\t        <div class="col-sm-12 col-xs-12">\r\n\t          <h1 class="m-n font-thin h3">组织架构管理</h1>\r\n\t        </div>\r\n\t      </div>\r\n      </div>\r\n      <div class="app-inner pos-rlt">\r\n\t\t\t  <div class="bg-light lter b-r pos-abt w-md h-full">\r\n\t\t\t      <hc-tree tree-control=tree load-asyn=true on-option-click=onTreeOptionClick(node,event) on-init=onTreeInit() open-folder-icon="fa fa-users" folder-icon="fa fa-users" leaf-icon="fa fa-users" show-option-icon=true on-selection-change=onSelectionChange(selection); load-url=/department/list>\r\n\t\t\t\t\t</hc-tree>\r\n\t\t\t  </div>\r\n\t            <div class="h-full bg-light lter" ng-controller=UserCtrl style="padding-left: 240px">\r\n\t            \t<div class="row wrapper-sm b-b m-l-non m-r-none">\r\n\t            \t\t<div class=col-sm-4>\r\n\t            \t\t\t<h1 class="m-n font-thin h4 inline" style="padding:7px 10px">\r\n\t            \t\t\t<i class="fa fa-users"></i> {{current.name}}\r\n\t            \t\t\t</h1>\r\n\t            \t\t\t<span class=text-sm style=color:#aaa ng-show="users.length > 0">( {{users.length}}人 )</span>\r\n\t            \t\t</div>\r\n\t            \t\t<div class=col-sm-8 style="text-align: right">\r\n\t\t\t\t\t\t\t<button class="btn btn-primary" ng-disabled=!current ng-click=addUser()>新增用户</button>\r\n\t\t\t\t\t\t\t<button class="btn btn-primary" ng-disabled=!selected ng-click=editUser() ng-disabled=selected.executing>编辑用户</button>\r\n\t\t\t\t\t\t\t<div class=btn-group dropdown is-open=status.isopen>\r\n\t\t\t\t\t            <button type=button class="btn btn-default" dropdown-toggle ng-disabled="!selected || selected.executing">\r\n\t\t\t\t\t             \t 更多&nbsp;<span class=caret></span>\r\n\t\t\t\t\t            </button>\r\n\t\t\t\t\t            <ul class=dropdown-menu role=menu style=left:inherit;right:0px>\r\n\t\t\t\t\t              <li><a href ng-click=reset($event)>重置密码</a></li>\r\n\t\t\t\t\t              <li><a href ng-click=transfer()>文档移交</a></li>\r\n\t\t\t\t\t              <li><a href ng-click=setQuota($event)>调整配额</a></li>\r\n\t\t\t\t\t              <li><a href ng-click=transferAdmin() ng-show="selected.role != \'SYS_ADMIN\'">移交管理员权限</a></li>\r\n\t\t\t\t\t            </ul>\r\n\t\t\t\t\t          </div>\r\n\t\t\t\t\t\t\t<div class=btn-group dropdown is-open=isImportOpen>\r\n                                <button class="btn btn-default">导入</button>\r\n\t\t\t\t\t\t\t\t<button type=button class="btn btn-default dropdown-toggle" dropdown-toggle>\r\n\t\t\t\t\t\t\t\t\t<span class=caret></span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<ul class="dropdown-menu dropdown-menu-right" role=menu>\r\n\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t<a>\r\n\t\t\t\t\t\t\t\t\t\t\t下载导入模板\r\n\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t</div>\r\n\t            \t</div>\r\n\t            \t<div class=table-responsive ng-show="!status.loading && users.length > 0">\r\n\t\t\t\t\t\t<table class="table table-hover b-b b-light">\r\n\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<th ng-click="title=\'username\';desc=!desc" width=30%>\r\n\t\t\t\t\t\t\t\t\t\t用户名\r\n\t\t\t\t\t\t\t\t\t \t<i ng-show="title == \'username\'" ng-class="{\'fa-caret-up\' : desc,\'fa-caret-down\':!desc}" class=fa> </i>\r\n\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t<th ng-click="title=\'name\';desc=!desc" width=20%>姓名\r\n\t\t\t\t\t\t\t\t\t\t<i ng-show="title == \'name\'" ng-class="{\'fa-caret-up\' : desc,\'fa-caret-down\':!desc}" class=fa> </i>\r\n\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t<th ng-click="title=\'email\';desc=!desc" width=30%>\r\n\t\t\t\t\t\t\t\t\t\t邮箱\r\n\t\t\t\t\t\t\t\t\t\t<i ng-show="title == \'email\'" ng-class="{\'fa-caret-up\' : desc,\'fa-caret-down\':!desc}" class=fa> </i>\r\n\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t<th ng-click="title=\'status\';desc=!desc" width=10%>\r\n\t\t\t\t\t\t\t\t\t\t状态\r\n\t\t\t\t\t\t\t\t\t\t<i ng-show="title == \'status\'" ng-class="{\'fa-caret-up\' : desc,\'fa-caret-down\':!desc}" class=fa> </i>\r\n\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t<th width=10%>操作</th>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\t\t<input class="input-sm form-control" placeholder="" ng-model=condition.username>\r\n\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\t\t<input class="input-sm form-control" placeholder="" ng-model=condition.name>\r\n\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\t\t<input class="input-sm form-control" placeholder="" ng-model=condition.email>\r\n\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\t\t<select class="input-sm form-control" ng-model=condition.status>\r\n\t\t\t\t\t\t\t\t\t\t\t<option></option>\r\n\t\t\t\t\t\t\t\t\t\t\t<option value=1>正常</option>\r\n\t\t\t\t\t\t\t\t\t\t\t<option value=2>锁定</option>\r\n                                            <option value=3>失效</option>\r\n                                        </select>\r\n\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t<tr ng-class="{\'user-selected\':user.selected}" ng-click=select(user); ng-repeat="user in users | filter:{username:condition.username,name:condition.name,email:condition.email,status:condition.status} | orderBy: title : desc" valign=middle style="line-height: 24px">\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<img ng-src="{{user.avatar | resource}}" class="img-circle m-r-xs" style=height:24px alt=...>\r\n\t\t\t\t\t\t\t\t\t\t<span class=m-r-xs>{{user.username}}</span>\r\n\t\t\t\t\t\t\t\t\t\t<span ng-if="user.role == \'ROLE_SYS_ADMIN\'" class="label label-sm label-minor">管理员</span>\r\n\t\t\t\t\t\t\t\t\t\t<span ng-if="user.role == \'ROLE_DOC_ADMIN\'" class="label label-sm label-minor">文档管理员</span>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>{{user.name}}</td>\r\n\t\t\t\t\t\t\t\t\t<td>{{user.email}}</td>\r\n\t\t\t\t\t\t\t\t\t<td>{{user.status | translate:\'hr.user.status\'}}</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-ban hover text-md m-r-xs" ng-show="user.status == 1" ng-click=disable(user,$event); tooltip=禁用></i>\r\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-check-circle-o hover text-md m-r-xs" ng-show="user.status == 3" ng-click=enable(user,$event); tooltip=启用></i>\r\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-lock hover text-md m-r-xs" ng-show="user.status == 1" ng-click=lock(user,$event); tooltip=锁定></i>\r\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-unlock hover text-md m-r-xs" ng-show="user.status == 2" ng-click=unlock(user,$event); tooltip=解锁></i>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="wrapper-xl text-center" ng-show=status.loading>\r\n\t\t\t\t\t\t<img ng-src="{{\'asset/img/loading.gif\'  | resource}}">\r\n\t\t\t\t\t\t<p class=m-t-sm>正在加载</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="wrapper-xl text-center" ng-show="(users.length == 0 || !users) && !status.loading">\r\n\t\t\t\t\t\t<i class="iconfont icon-empty"></i>\r\n\t\t\t\t\t\t<p class=m-t-md>该部门中没有员工</p>\r\n\t\t\t\t\t</div>\r\n\t            </div>\r\n\t          </div>\r\n        </div>\r\n        <ul id=departmentMenu class=dropdown-menu role=menu>\r\n           <li><a tabindex=-1 href="" ng-click=addDepartment()>添加子部门</a></li>\r\n           <li><a tabindex=-1 href="" ng-click=editDepartment()>编辑部门</a></li>\r\n           <li><a tabindex=-1 ng-show="selected.$parent.$root !== true" ng-click=deleteDepartment()>删除部门</a></li>\r\n         </ul>\r\n</div>'),t.put("asset/tpl/dashboard/organization/user_form.html",'<div class=m-c>\r\n    <div class=modal-header>\r\n        <h4 class=modal-title>用户 - {{operation}}</h4>\r\n    </div>\r\n    <div class="modal-body wrapper-md">\r\n        <div class=row>\r\n            <div class=col-sm-12>\r\n                <form name=userForm class="form-horizontal form-validation">\r\n                    <div class=form-group>\r\n                        <label class="col-sm-3 control-label required">用户名</label>\r\n                        <div class=col-sm-9>\r\n                            <input name=name ng-model=user.username required class=form-control>\r\n                        </div>\r\n                    </div>\r\n                    <div class=form-group>\r\n                        <label class="col-sm-3 control-label required">姓名</label>\r\n                        <div class=col-sm-9>\r\n                            <input name=name ng-model=user.name required ng-minlength=2 class=form-control>\r\n                        </div>\r\n                    </div>\r\n                    <div class=form-group>\r\n                        <label class="col-sm-3 control-label required">邮箱</label>\r\n                        <div class=col-sm-9>\r\n                            <input type=email name=email ng-model=user.email class=form-control>\r\n                        </div>\r\n                    </div>\r\n                    <div class=form-group>\r\n                        <label class="col-sm-3 control-label">手机号</label>\r\n                        <div class=col-sm-9>\r\n                            <input name=phoneNumber ng-model=user.phoneNumer class=form-control>\r\n                        </div>\r\n                    </div>\r\n                    <div class=form-group>\r\n                        <label class="col-sm-3 control-label required">所属部门</label>\r\n                        <div class=col-sm-9>\r\n                            <div class=input-group dropdown is-open=openTree dropdown-toggle>\r\n                                <input required ng-model=user.departmentName readonly class=form-control>\r\n                                <div class=input-group-btn>\r\n                                    <button type=button class="btn btn-default dropdown-toggle">\r\n                                        <span class=caret></span>\r\n                                    </button>\r\n                                </div>\r\n                                <div class="dropdown-menu w-full">\r\n                                    <hc-tree tree-control=tree load-asyn=true open-folder-icon="fa fa-users" folder-icon="fa fa-users" leaf-icon="fa fa-users" on-selection-change=onSelect(selection); load-url=/department/list>\r\n                                    </hc-tree>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=form-group ng-show=result>\r\n                        <div class=col-sm-12>\r\n                            <div class="alert alert-danger" style=margin-bottom:0px role=alert>{{result.message}}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=form-group>\r\n                        <div class=col-sm-12>\r\n                            <div class="alert alert-info" style=margin-bottom:0px role=alert>\r\n                                <b>提示：</b>用户添加后密码为系统设置的默认密码，用户第一次登录之后必须修改密码\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=modal-footer style="text-align: right">\r\n        <button type=button class="btn btn-primary" ng-click=save() ng-disabled="saving=== true || userForm.$invalid || !userForm.$dirty">保存\r\n        </button>\r\n        <button type=button class="btn btn-default" ng-click=cancel()>取消</button>\r\n    </div>\r\n</div>'),t.put("asset/tpl/dashboard/organization/user_move.html",'<div class=m-c>\r\n\t<div class=modal-header>\r\n\t\t<h4 class=modal-title>{{operation}} [{{user.name}}] 到</h4>\r\n\t</div>\r\n\t<div class="modal-body wrapper-lg">\r\n\t\t<div class=row>\r\n\t\t\t<div class=col-sm-12>\r\n\t\t\t\t<form name=departmentMoveForm class="form-horizontal form-validation">\r\n\t\t\t\t\t<div class=form-group>\r\n\t\t\t\t\t\t<label class="col-sm-3 control-label">所属部门：</label>\r\n\t\t\t\t\t\t<div class=col-sm-9>\r\n\t\t\t\t\t\t\t<hc-combo-tree ng-model=department tree-config=treeConfig on-change=onChange(node);>\r\n\t\t\t\t\t\t</hc-combo-tree></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="form-group m-b-none" ng-show=result>\r\n\t\t\t\t\t\t<div class="col-sm-12 m-t-md text-center">\r\n\t\t\t\t\t\t\t<div class="alert alert-danger m-b-none" role=alert>{{result.message}}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class=modal-footer style="text-align: right">\r\n\t\t<button type=button class="btn btn-primary" ng-click=save() ng-disabled=(!changed)>确定</button>\r\n\t\t<button type=button class="btn btn-minor" ng-click=cancel()>取消</button>\r\n\t</div>\r\n</div>'),t.put("asset/tpl/dashboard/organization/user_quota.html",'<div class=m-c>\r\n\t<div class=modal-header>\r\n\t\t<h4 class=modal-title>用户 [{{user.name}}] 配额调整</h4>\r\n\t</div>\r\n\t<div class="modal-body wrapper-lg">\r\n\t\t<div class=row>\r\n\t\t\t<div class=col-sm-12>\r\n\t\t\t\t<form name=userQutaoForm class="form-horizontal form-validation">\r\n\t\t\t\t\t<div class=form-group>\r\n\t\t\t\t\t\t<label class="col-sm-3 control-label">配额：</label>\r\n\t\t\t\t\t\t<div class=col-sm-9>\r\n\t\t\t\t\t\t\t<input type=number class="form-control w-xs inline" ng-model=user.quota min=1> GB\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="form-group m-b-none" ng-show=result>\r\n\t\t\t\t\t\t<div class="col-sm-12 m-t-md text-center">\r\n\t\t\t\t\t\t\t<div class="alert alert-danger m-b-none" role=alert>{{result.message}}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class=modal-footer style="text-align: right">\r\n\t\t<button type=button class="btn btn-primary" ng-click=save() ng-disabled="useQuatoForm.$invalid || !userQutaoForm.$dirty || saving">\r\n\t\t\t<span ng-show=!saving>保存</span>\r\n\t\t\t<span ng-show=saving>正在保存</span>\r\n\t\t</button>\r\n\t\t<button type=button class="btn btn-default" ng-click=cancel()>取消</button>\r\n\t</div>\r\n</div>'),t.put("asset/tpl/dashboard/organization/user_transfer_admin.html",'<div class=m-c>\r\n\t<div class=modal-header>\r\n\t\t<div class="pull-right col-md-6 no-padder">\r\n\t\t\t<div class=input-group>\r\n\t\t          <input class=form-control ng-model=condition placeholder=搜索:用户名/姓名/拼音>\r\n\t\t          <div class=input-group-btn>\r\n\t\t            <button type=button class="btn btn-default" ng-show=condition ng-click=clear();>\r\n\t\t            \t<i class="glyphicon glyphicon-remove"></i>\r\n\t\t            </button>\r\n\t\t            <button type=button class="btn btn-default" ng-click=search();>\r\n\t\t\t\t\t\t<i class="glyphicon glyphicon-search"></i>\r\n\t\t\t\t\t</button>\r\n\t\t          </div>\r\n\t\t        </div>\r\n\t\t</div>\r\n\t\t<h4 class=modal-title style="line-height: 34px">\r\n\t\t\t<i class="glyphicon glyphicon-transfer"></i>\r\n\t\t\t移交管理员权限\r\n\t\t</h4>\r\n\t\t\r\n\t</div>\r\n\t<div class="modal-body no-padder">\r\n\t\t<div ng-show=!searching style="height: 300px">\r\n\t\t\t<div class="col-sm-6 h-full b-r wrapper-sm">\r\n\t\t\t\t<hc-tree tree-control=tree load-asyn=true on-init=onTreeInit() open-folder-icon="fa fa-users" folder-icon="fa fa-users" leaf-icon="fa fa-users" on-selection-change=loadUser(selection); load-url=/department/list></hc-tree>\r\n\t\t\t</div>\r\n\t\t\t<div class="col-sm-6 h-full wrapper-sm">\r\n\t\t\t\t<div class="wrapper-xl text-center" ng-show=loading>\r\n\t\t\t\t\t<img src=asset/img/loading.gif>\r\n\t\t\t\t\t<p class=m-t-sm>正在加载</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div ng-repeat="user in users" class="wrapper-xs hover-bg" ng-show=!loading ng-click=select(user);>\r\n\t\t\t\t\t<img ng-src="{{user.avatar | resource}}" class=img-circle style=height:30px alt=...>\r\n\t\t\t\t\t<span class=m-l-sm style="line-height: 30px">{{user.name}}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\t<div class=wrapper-sm ng-show=searching style="height: 300px">\r\n\t\t\t\t<div class="col-md-4 wrapper-xs hover-bg" ng-repeat="user in result" ng-dblclick=transfer(user) ng-click=select(user);>\r\n\t\t\t\t\t<img ng-src="{{user.avatar | resource}}" class="img-circle pull-left" style=height:50px alt=...>\r\n\t\t\t\t\t<div class=inline>\r\n\t\t\t\t\t\t<span class=m-l-sm style="line-height: 30px">{{user.name}}</span>\r\n\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t<span class=m-l-sm style="line-height: 20px;font-size:12px;color:#bbb">{{user.department.name}}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t    <div class=col-sm-12 ng-show="result.length == 0">\r\n\t\t\t    \t<div class="wrapper-xs text-center">\r\n\t\t\t\t\t\t<img ng-src="{{\'asset/img/user_empty.png\' | resource}}">\r\n\t\t\t\t\t\t<p class=m-t-sm>没有搜索到用户</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="col-sm-12 permission-user-part" ng-show=loading>\r\n\t\t\t\t\t<div class="wrapper-xl text-center">\r\n\t\t\t\t\t<img ng-src="{{\'asset/img/loading.gif\' | resource}}">\r\n\t\t\t\t\t<p class=m-t-sm>正在加载</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="wrapper-sm b-t text-center" ng-hide=!selected>\r\n\t\t\t<div ng-show="selected.id != user.id">\r\n\t\t\t\t<div class=inline style="line-height: 30px">移交给：</div>\r\n\t\t\t\t<img ng-src="{{selected.avatar | resource}}" class=img-circle style="height:24px;margin-top: -5px" alt=...>\r\n\t\t\t\t<div class=inline style="line-height: 30px">{{selected.name}}</div>\r\n\t\t\t</div>\r\n\t\t\t<div ng-show="selected.id == user.id">\r\n\t\t\t\t<div class="inline text-danger" style="line-height: 30px">不能移交给自己</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class=modal-footer>\r\n\t\t<button type=button class="btn btn-primary" ng-click=ok() style="margin-left: 5px" ng-disabled="!selected || saving">\r\n\t\t\t<span ng-show=!saving>移交</span>\r\n\t\t\t<span ng-show=saving>正在移交</span>\r\n\t\t</button>\r\n\t\t<button type=button class="btn btn-default" ng-click=close()>取消</button>\r\n\t</div>\r\n</div>'),t.put("asset/tpl/dashboard/organization/user_transfer.html",'<div class=m-c>\r\n\t<div class=modal-header>\r\n\t\t<div class="pull-right col-md-6 no-padder">\r\n\t\t\t<div class=input-group>\r\n\t\t          <input class=form-control ng-model=condition placeholder=搜索:用户名/姓名/拼音>\r\n\t\t          <div class=input-group-btn>\r\n\t\t            <button type=button class="btn btn-default" ng-show=condition ng-click=clear();>\r\n\t\t            \t<i class="glyphicon glyphicon-remove"></i>\r\n\t\t            </button>\r\n\t\t            <button type=button class="btn btn-default" ng-click=search();>\r\n\t\t\t\t\t\t<i class="glyphicon glyphicon-search"></i>\r\n\t\t\t\t\t</button>\r\n\t\t          </div>\r\n\t\t        </div>\r\n\t\t</div>\r\n\t\t<h4 class=modal-title style="line-height: 34px">\r\n\t\t\t<i class="glyphicon glyphicon-transfer"></i>\r\n\t\t\t用户 [{{user.name}}] 文档移交\r\n\t\t</h4>\r\n\t\t\r\n\t</div>\r\n\t<div class="modal-body no-padder">\r\n\t\t<div ng-show=!searching style="height: 300px">\r\n\t\t\t<div class="col-sm-6 h-full b-r wrapper-sm">\r\n\t\t\t\t<hc-tree tree-control=tree load-asyn=true on-init=onTreeInit() open-folder-icon="fa fa-users" folder-icon="fa fa-users" leaf-icon="fa fa-users" on-selection-change=loadUser(selection); load-url=/department/list></hc-tree>\r\n\t\t\t</div>\r\n\t\t\t<div class="col-sm-6 h-full wrapper-sm">\r\n\t\t\t\t<div class="wrapper-xl text-center" ng-show=loading>\r\n\t\t\t\t\t<img src=asset/img/loading.gif>\r\n\t\t\t\t\t<p class=m-t-sm>正在加载</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div ng-repeat="user in users" class="wrapper-xs hover-bg" ng-show=!loading ng-click=select(user);>\r\n\t\t\t\t\t<img ng-src="{{user.avatar | resource}}" class=img-circle style=height:30px alt=...>\r\n\t\t\t\t\t<span class=m-l-sm style="line-height: 30px">{{user.name}}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\t<div class=wrapper-sm ng-show=searching style="height: 300px">\r\n\t\t\t\t<div class="col-md-4 wrapper-xs hover-bg" ng-repeat="user in result" ng-dblclick=transfer(user) ng-click=select(user);>\r\n\t\t\t\t\t<img ng-src="{{user.avatar | resource}}" class="img-circle pull-left" style=height:50px alt=...>\r\n\t\t\t\t\t<div class=inline>\r\n\t\t\t\t\t\t<span class=m-l-sm style="line-height: 30px">{{user.name}}</span>\r\n\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t<span class=m-l-sm style="line-height: 20px;font-size:12px;color:#bbb">{{user.department.name}}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t    <div class=col-sm-12 ng-show="result.length == 0">\r\n\t\t\t    \t<div class="wrapper-xs text-center">\r\n\t\t\t\t\t\t<img ng-src="{{\'asset/img/user_empty.png\' | resource}}">\r\n\t\t\t\t\t\t<p class=m-t-sm>没有搜索到用户</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="col-sm-12 permission-user-part" ng-show=loading>\r\n\t\t\t\t\t<div class="wrapper-xl text-center">\r\n\t\t\t\t\t<img ng-src="{{\'asset/img/loading.gif\' | resource}}">\r\n\t\t\t\t\t<p class=m-t-sm>正在加载</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="wrapper-sm b-t text-center" ng-hide=!selected>\r\n\t\t\t<div ng-show="selected.id != user.id">\r\n\t\t\t\t<div class=inline style="line-height: 30px">移交给：</div>\r\n\t\t\t\t<img ng-src="{{selected.avatar | resource}}" class=img-circle style="height:24px;margin-top: -5px" alt=...>\r\n\t\t\t\t<div class=inline style="line-height: 30px">{{selected.name}}</div>\r\n\t\t\t</div>\r\n\t\t\t<div ng-show="selected.id == user.id">\r\n\t\t\t\t<div class="inline text-danger" style="line-height: 30px">不能移交给自己</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class=modal-footer>\r\n\t\t<button type=button class="btn btn-primary" ng-click=ok() style="margin-left: 5px" ng-disabled="!selected || saving">\r\n\t\t\t<span ng-show=!saving>移交</span>\r\n\t\t\t<span ng-show=saving>正在移交</span>\r\n\t\t</button>\r\n\t\t<button type=button class="btn btn-default" ng-click=close()>取消</button>\r\n\t</div>\r\n</div>'),t.put("asset/tpl/dashboard/security/activity.html",'<div ng-controller=ActivityCtrl class=app-ctrl style="padding-top: 94px;padding-bottom: 42px">\r\n    <div class="bg-light b-b app-title-fixed">\r\n        <div class="col-sm-12 wrapper-sm col-xs-12 b-b">\r\n\t\t\t\t<span class=text-md>\r\n\t\t\t\t\t<i class="glyphicon glyphicon-list-alt"></i>\r\n\t\t\t\t\t操作日志\r\n\t\t\t\t</span>\r\n        </div>\r\n        <div class="col-sm-12 wrapper-sm lter col-xs-12">\r\n            <iframe class=hidden name=exportIframe></iframe>\r\n            <form id=conditionForm class="form-inline text-xs" target=exportIframe action=/activity/export>\r\n                <div class="form-group m-r-xs">\r\n                    <label>时间：</label>\r\n                    <input name=start class="form-control input-sm" ng-click="startOpended = true" date-format=YYYY-MM-DD ng-model=condition.start datepicker-popup=yyyy-MM-dd is-open=startOpended style=width:100px datepicker-options="{formatYear: \'yyyy\',class:\'datepicker\',showWeeks:false}" close-text=关闭 current-text=今天 clear-text=清除>\r\n                    -\r\n                    <input name=end class="form-control input-sm" date-format=YYYY-MM-DD ng-click="endOpened = true" ng-model=condition.end datepicker-popup=yyyy-MM-dd is-open=endOpened style=width:100px datepicker-options="{formatYear: \'yyyy\',class:\'datepicker\',showWeeks:false}" close-text=关闭 current-text=今天 clear-text=清除>\r\n                </div>\r\n                <div class="form-group text-xs m-r-xs">\r\n                    <label>文件名称：</label>\r\n                    <input name=fileName style=width:120px class="form-control input-sm" id=name ng-model=condition.fileName>\r\n                </div>\r\n                <div class="form-group m-r-xs text-xs">\r\n                    <label>操作人：</label>\r\n                    <input name=operator style=width:120px class="form-control input-sm" id=operator ng-model=condition.operator>\r\n                </div>\r\n                <div class="form-group m-r-xs text-xs">\r\n                    <label>操作类型：</label>\r\n                    <select type=text name=operation class="form-control input-sm" id=operation ng-model=condition.operation>\r\n                        <option value="">所有</option>\r\n                        <option value=upload>上传</option>\r\n                        <option value=download>下载</option>\r\n                        <option value=create>创建</option>\r\n                        <option value=moveIn>移入</option>\r\n                        <option value=moveOut>移出</option>\r\n                        <option value=copyIn>复制进入</option>\r\n                        <option value=copyIn>复制出去</option>\r\n                        <option value=rename>重命名</option>\r\n                        <option value=remove>删除</option>\r\n                        <option value=delete>彻底删除</option>\r\n                        <option value=revert>恢复</option>\r\n                        <option value=lock>锁定</option>\r\n                        <option value=unlock>解锁</option>\r\n                        <option value=addAuthorize>添加授权</option>\r\n                        <option value=updateAuthorize>修改授权</option>\r\n                        <option value=removeAuthorize>删除授权</option>\r\n                        <option value=setTags>设置标签</option>\r\n                        <option value=updateDesc>修改备注</option>\r\n                        <option value=addReview>新增评论</option>\r\n                        <option value=removeReview>删除评论</option>\r\n                    </select>\r\n                </div>\r\n                <div class=pull-right>\r\n                    <button type=button class="btn btn-sm btn-default" ng-click=reload()>\r\n                        <i class="glyphicon glyphicon-search"></i>\r\n                        搜索\r\n                    </button>\r\n                    <button type=button class="btn btn-sm btn-default" onclick="$(\'#conditionForm\').submit();">\r\n                        <i class="glyphicon glyphicon-export"></i>\r\n                        导出\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n    <div class="app-inner bg-light lter" ng-show=!error>\r\n        <div class="table-responsive h-full" ng-show="result.total > 0 && !loading">\r\n            <table class="table table-hover b-b" style="table-layout: fixed">\r\n                <thead>\r\n                <tr>\r\n                    <th width=10%>\r\n                        操作人\r\n                    </th>\r\n                    <th width=15%>\r\n                        操作时间\r\n                    </th>\r\n                    <th width=10%>\r\n                        操作类型\r\n                    </th>\r\n                    <th width=25%>\r\n                        操作对象\r\n                    </th>\r\n                    \r\n                    <th width=40%>描述</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr ng-repeat="activity in result.records" valign=middle>\r\n                    <td>{{activity.operator.name}}</td>\r\n                    <td>{{activity.operateDate}}</td>\r\n                    <td>{{activity.operation | translate:\'activity\'}}</td>\r\n                    <td style="word-break: break-all">\r\n                        {{activity.document.name}}\r\n                    </td>\r\n                    \r\n                    <td ng-switch=activity.operation style="word-break: break-all">\r\n                        <div ng-switch-when=rename>\r\n                            <span>更改前：{{activity.originalDescription}}</span><br>\r\n                            <span>更改后：{{activity.currentName}}</span>\r\n                        </div>\r\n                        <div ng-switch-when=copy>\r\n                            <span>原路径：{{activity.originalPath}}</span><br>\r\n                            <span>现路径：{{activity.currentPath}}</span>\r\n                        </div>\r\n                        <div ng-switch-when=move>\r\n                            <span>原路径：{{activity.originalPath}}</span><br>\r\n                            <span>现路径：{{activity.currentPath}}</span>\r\n                        </div>\r\n                        <div ng-switch-default>\r\n                            {{activity.currentPath}}\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div class="wrapper-xl text-center" ng-show=loading>\r\n            <img ng-src="{{\'asset/img/loading.gif\' | resource}}">\r\n            <p class=m-t-sm>正在加载</p>\r\n        </div>\r\n        <div class="wrapper-xl text-center" ng-show="result.total == 0 && !loading">\r\n            <i class="iconfont icon-empty"></i>\r\n            <p class=m-t-md>没有查找到数据</p>\r\n        </div>\r\n    </div>\r\n    <div class="pos-abt w-full b-t" style=bottom:0px ng-show="!error && result.total > 0 && !loading">\r\n        <div class="col-sm-6 wrapper-xs">\r\n            <button class="btn btn-sm btn-link" ng-click=loadPage(1) ng-disabled="pagination.page == 1">\r\n                <i class="fa fa-fast-backward"></i>\r\n            </button>\r\n            <button class="btn btn-sm btn-link" ng-click="loadPage(pagination.page - 1)" ng-disabled="pagination.page == 1">\r\n                <i class="fa fa-backward"></i>\r\n            </button>\r\n            <input class="inline form-control input-sm" style="width: 30px" ng-model-options="{ updateOn: \'blur\' }" ng-change=onPageChange(); ng-model=pagination.page>\r\n            /\r\n            <span>{{pagination.pages}}</span>\r\n            <button class="btn btn-sm btn-link" ng-click="loadPage(pagination.page + 1)" ng-disabled="pagination.page == pagination.pages">\r\n                <i class="fa fa-forward"></i>\r\n            </button>\r\n            <button class="btn btn-sm btn-link" ng-click=loadPage(pagination.pages) ng-disabled="pagination.page == pagination.pages">\r\n                <i class="fa fa-fast-forward"></i>\r\n            </button>\r\n        </div>\r\n        <div class="col-sm-6 wrapper-xs text-right">\r\n            <div style="line-height: 30px">共{{result.total}}条数据，每页显示\r\n                <select class="form-control input-sm inline" style=width:65px ng-change=reload() ng-model=pagination.size>\r\n                    <option value=20>20</option>\r\n                    <option value=50>50</option>\r\n                    <option value=100>100</option>\r\n                    <option value=200>200</option>\r\n                </select>\r\n                条\r\n            </div>\r\n        </div>\r\n        <div class=clearfix></div>\r\n    </div>\r\n    <div class="wrapper-xl text-center" ng-show=error>\r\n        <i class="iconfont icon-error"></i>\r\n        <p class=m-t-md>加载失败：{{error}}</p>\r\n    </div>\r\n</div>\r\n'),t.put("asset/tpl/dashboard/security/login_log.html",'<div ng-controller=LoginLogCtrl class=app-ctrl style="padding-top: 94px;padding-bottom: 42px">\r\n    <div class="bg-light b-b app-title-fixed">\r\n        <div class="col-sm-12 wrapper-sm col-xs-12 b-b">\r\n\t\t\t\t<span class=text-md>\r\n\t\t\t\t\t<i class="glyphicon glyphicon-list-alt"></i>\r\n\t\t\t\t\t登录日志\r\n\t\t\t\t</span>\r\n        </div>\r\n        <div class="col-sm-12 wrapper-sm lter col-xs-12">\r\n            <iframe class=hidden name=exportIframe></iframe>\r\n            <form id=conditionForm class="form-inline text-xs" target=exportIframe action=/login/log/export>\r\n                <div class="form-group m-r-xs">\r\n                    <label>时间：</label>\r\n                    <input name=start class="form-control input-sm" ng-click="startOpended = true" date-format=YYYY-MM-DD ng-model=condition.start datepicker-popup=yyyy-MM-dd is-open=startOpended style=width:100px datepicker-options="{formatYear: \'yyyy\',class:\'datepicker\',showWeeks:false}" close-text=关闭 current-text=今天 clear-text=清除>\r\n                    -\r\n                    <input name=end class="form-control input-sm" date-format=YYYY-MM-DD ng-click="endOpened = true" ng-model=condition.end datepicker-popup=yyyy-MM-dd is-open=endOpened style=width:100px datepicker-options="{formatYear: \'yyyy\',class:\'datepicker\',showWeeks:false}" close-text=关闭 current-text=今天 clear-text=清除>\r\n                </div>\r\n                <div class="form-group m-r-xs text-xs">\r\n                    <label>姓名：</label>\r\n                    <input name=name style=width:120px class="form-control input-sm" id=operator ng-model=condition.name>\r\n                </div>\r\n                <div class="form-group m-r-xs text-xs">\r\n                    <label>用户名：</label>\r\n                    <input name=username style=width:120px class="form-control input-sm" id=operator ng-model=condition.username>\r\n                </div>\r\n                <div class=pull-right>\r\n                    <button type=button class="btn btn-sm btn-default" ng-click=reload()>\r\n                        <i class="glyphicon glyphicon-search"></i>\r\n                        搜索\r\n                    </button>\r\n                    <button type=button class="btn btn-sm btn-default" onclick="$(\'#conditionForm\').submit();">\r\n                        <i class="glyphicon glyphicon-export"></i>\r\n                        导出\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n    <div class="app-inner bg-light lter" ng-show=!error>\r\n        <div class="table-responsive h-full" ng-show="result.total > 0 && !loading">\r\n            <table class="table table-hover b-b">\r\n                <thead>\r\n                <tr>\r\n                    <th width=20%>\r\n                        用户名\r\n                    </th>\r\n                    <th width=20%>\r\n                        姓名\r\n                    </th>\r\n                    <th width=15%>\r\n                        登录时间\r\n                    </th>\r\n                    <th width=15%>\r\n                        登录IP\r\n                    </th>\r\n                    <th width=15%>\r\n                        UserAgent\r\n                    </th>\r\n                    <th width=15%>客户端</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr ng-repeat="log in result.records" valign=middle>\r\n                    <td>{{log.username}}</td>\r\n                    <td>{{log.name}}</td>\r\n                    <td>{{log.loginDate}}</td>\r\n                    <td>{{log.loginIp}}</td>\r\n                    <td class=text-ellipsis>{{log.userAgent}}</td>\r\n                    <td>{{log.client}}</td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div class="wrapper-xl text-center" ng-show=loading>\r\n            <img ng-src="{{\'asset/img/loading.gif\' | resource}}">\r\n            <p class=m-t-sm>正在加载</p>\r\n        </div>\r\n        <div class="wrapper-xl text-center" ng-show="result.total == 0 && !loading">\r\n            <i class="iconfont icon-empty"></i>\r\n            <p class=m-t-md>没有查找到数据</p>\r\n        </div>\r\n    </div>\r\n    <div class="pos-abt w-full b-t" style=bottom:0px ng-show="!error && result.total > 0 && !loading">\r\n        <div class="col-sm-6 wrapper-xs">\r\n            <button class="btn btn-sm btn-link" ng-click=loadPage(1) ng-disabled="pagination.page == 1">\r\n                <i class="fa fa-fast-backward"></i>\r\n            </button>\r\n            <button class="btn btn-sm btn-link" ng-click="loadPage(pagination.page - 1)" ng-disabled="pagination.page == 1">\r\n                <i class="fa fa-backward"></i>\r\n            </button>\r\n            <input class="inline form-control input-sm" style="width: 30px" ng-model-options="{ updateOn: \'blur\' }" ng-change=onPageChange(); ng-model=pagination.page>\r\n            /\r\n            <span>{{pagination.pages}}</span>\r\n            <button class="btn btn-sm btn-link" ng-click="loadPage(pagination.page + 1)" ng-disabled="pagination.page == pagination.pages">\r\n                <i class="fa fa-forward"></i>\r\n            </button>\r\n            <button class="btn btn-sm btn-link" ng-click=loadPage(pagination.pages) ng-disabled="pagination.page == pagination.pages">\r\n                <i class="fa fa-fast-forward"></i>\r\n            </button>\r\n        </div>\r\n        <div class="col-sm-6 wrapper-xs text-right">\r\n            <div style="line-height: 30px">共{{result.total}}条数据，每页显示\r\n                <select class="form-control input-sm inline" style=width:65px ng-change=reload() ng-model=pagination.size>\r\n                    <option value=20>20</option>\r\n                    <option value=50>50</option>\r\n                    <option value=100>100</option>\r\n                    <option value=200>200</option>\r\n                </select>\r\n                条\r\n            </div>\r\n        </div>\r\n        <div class=clearfix></div>\r\n    </div>\r\n    <div class="wrapper-xl text-center" ng-show=error>\r\n        <i class="iconfont icon-error"></i>\r\n        <p class=m-t-md>加载失败：{{error}}</p>\r\n    </div>\r\n</div>\r\n'),t.put("asset/tpl/dashboard/security/permission_form.html",'<div class=m-c>\r\n\t<div class=modal-header>\r\n\t\t<h4 class=modal-title>权限配置- {{operation}}</h4>\r\n\t</div>\r\n\t<div class="modal-body wrapper-lg">\r\n\t\t<div class=row>\r\n\t\t\t<div class=col-sm-12>\r\n\t\t\t\t<form name=permissionConfigForm class="form-horizontal form-validation">\r\n\t\t\t\t\t<div class=form-group>\r\n\t\t\t\t\t\t<label class="col-sm-2 control-label">名称</label>\r\n\t\t\t\t\t\t<div class=col-sm-10>\r\n\t\t\t\t\t\t\t<input name=name ng-model=permission.name required class=form-control>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=form-group>\r\n\t\t\t\t\t\t<label class="col-sm-2 control-label">权限</label>\r\n\t\t\t\t\t\t<div class=col-sm-10>\r\n\t\t\t\t\t\t\t<label class="checkbox-inline i-checks col-sm-12 m-l-none">\r\n\t\t\t\t              <input type=checkbox name=isCheckAll ng-model=isCheckAll ng-change=checkAll(isCheckAll);><i></i> 全选\r\n\t\t\t\t            </label>\r\n\t\t\t\t\t\t\t<label class="checkbox-inline i-checks col-sm-4 m-l-none">\r\n\t\t\t\t              <input type=checkbox name=authorities ng-model=permissions.view><i></i> 查看/预览\r\n\t\t\t\t            </label>\r\n\t\t\t\t\t\t\t<label class="checkbox-inline i-checks col-sm-4 m-l-none">\r\n\t\t\t\t              <input type=checkbox name=authorities ng-model=permissions.upload><i></i> 上传\r\n\t\t\t\t            </label>\r\n\t\t\t\t            <label class="checkbox-inline i-checks col-sm-4 m-l-none">\r\n\t\t\t\t              <input type=checkbox name=authorities ng-model=permissions.download><i></i> 下载\r\n\t\t\t\t            </label>\r\n\t\t\t\t           \t<label class="checkbox-inline i-checks col-sm-4 m-l-none">\r\n\t\t\t\t              <input type=checkbox name=authorities ng-model=permissions.create><i></i> 创建文件夹\r\n\t\t\t\t            </label>\r\n\t\t\t\t            <label class="checkbox-inline i-checks col-sm-4 m-l-none">\r\n\t\t\t\t              <input type=checkbox name=authorities ng-model=permissions.move><i></i> 移动\r\n\t\t\t\t            </label>\r\n\t\t\t\t            <label class="checkbox-inline i-checks col-sm-4 m-l-none">\r\n\t\t\t\t              <input type=checkbox name=authorities ng-model=permissions.copy><i></i> 复制\r\n\t\t\t\t            </label>\r\n\t\t\t\t            <label class="checkbox-inline i-checks col-sm-4 m-l-none">\r\n\t\t\t\t              <input type=checkbox name=authorities ng-model=permissions.lock><i></i> 锁定/解锁\r\n\t\t\t\t            </label>\r\n\t\t\t\t            <label class="checkbox-inline i-checks col-sm-4 m-l-none">\r\n\t\t\t\t              <input type=checkbox name=authorities ng-model=permissions.remove><i></i> 删除/恢复\r\n\t\t\t\t            </label>\r\n\t\t\t\t            <label class="checkbox-inline i-checks col-sm-4 m-l-none">\r\n\t\t\t\t              <input type=checkbox name=authorities ng-model=permissions.share><i></i> 分享\r\n\t\t\t\t            </label>\r\n\t\t\t\t            <label class="checkbox-inline i-checks col-sm-4 m-l-none">\r\n\t\t\t\t              <input type=checkbox name=authorities ng-model=permissions.review><i></i> 评论\r\n\t\t\t\t            </label>\r\n\t\t\t\t\t\t\t<label class="checkbox-inline i-checks col-sm-4 m-l-none">\r\n\t\t\t\t\t\t\t\t<input type=checkbox name=authorities ng-model=permissions.edit><i></i> 编辑\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=form-group>\r\n\t\t\t\t\t\t<label class="col-sm-2 control-label">描述</label>\r\n\t\t\t\t\t\t<div class=col-sm-10>\r\n\t\t\t\t\t\t\t<textarea rows=3 name=extensions ng-model=permission.description class=form-control></textarea>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class=modal-footer style="text-align: right">\r\n\t\t<button type=button class="btn btn-primary" ng-click=save() ng-disabled="(permissionConfigForm.$invalid || !permissionConfigForm.$dirty || saving)">\r\n\t\t\t<span ng-show=saving>正在保存</span>\r\n\t\t\t<span ng-show=!saving>保存</span>\r\n\t\t</button>\r\n\t\t<button type=button class="btn btn-default" ng-click=cancel()>取消</button>\r\n\t</div>\r\n</div>'),t.put("asset/tpl/dashboard/security/permission.html",'<div ng-controller=PermissionConfigCtrl class=app-ctrl>\r\n\t<div class="bg-light lter b-b wrapper-md app-title-fixed">\r\n\t\t<div class=row>\r\n\t\t\t<div class="col-sm-6 col-xs-5">\r\n\t\t\t\t<h1 class="m-n font-thin h3" style="line-height: 34px">权限配置</h1>\r\n\t\t\t</div>\r\n\t\t\t<div class="col-sm-6 col-xs-7 text-right">\r\n\t\t\t\t<button class="btn btn-primary" ng-click=add()>新建权限</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="app-inner bg-light lter">\r\n\t\t\t\t<div class="table-responsive h-full" ng-show="permissions.length > 0 && !loading">\r\n\t\t\t\t\t<table class="table table-hover b-b">\r\n\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<th width=30%>\r\n\t\t\t\t\t\t\t\t\t名称\r\n\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t<th width=50%>描述 \r\n\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t<th width=20%>操作</th>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<tr ng-repeat="permission in permissions | filter:{name:condition.name,description:condition.description}" valign=middle>\r\n\t\t\t\t\t\t\t\t<td>{{permission.name}}</td>\r\n\t\t\t\t\t\t\t\t<td>{{permission.description}}</td>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-edit hover text-md m-r-xs" ng-click=edit(permission,$event); tooltip=编辑></i>\r\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-trash hover text-md m-r-xs" ng-click=remove(permission,$event); tooltip=删除></i>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="wrapper-xl text-center" ng-show=loading>\r\n\t\t\t<img ng-src="{{\'asset/img/loading.gif\' | resource}}">\r\n\t\t\t<p class=m-t-sm>正在加载</p>\r\n\t\t</div>\r\n\t\t<div class="wrapper-xl text-center" ng-show="(permissions.length == 0 || !permissions) && !loading">\r\n\t\t\t<i class="iconfont icon-empty"></i>\r\n\t\t\t<p class=m-t-md>目前还没有配置权限</p>\r\n\t\t\t<button class="btn btn-primary" onclick=add()>\r\n\t\t\t\t<i class="glyphicon glyphicon-plus"></i>新建权限\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="wrapper-xl text-center" ng-show=error>\r\n\t\t\t\t<i class="iconfont icon-error"></i>\r\n\t\t\t\t<p class=m-t-md>加载权限失败：{{error}}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n'),t.put("asset/tpl/dashboard/system/mail.html",'<div ng-controller=MailSettingCtrl class=app-ctrl>\r\n<div class="bg-light lter b-b wrapper-md app-title-fixed">\r\n<div class=row>\r\n        <div class="col-sm-6 col-xs-6">\r\n          <h1 class="m-n font-thin h3" style="line-height: 34px">邮件服务器</h1>\r\n        </div>\r\n        <div class="col-sm-6 col-xs-6" style="text-align: right">\r\n          <button class="btn btn-primary" ng-disabled="settingForm.$invalid || !settingForm.$dirty" ng-click=save()>保存</button>\r\n          <button class="btn btn-minor" ng-disabled=!settingForm.$dirty ng-click=reset()>重置</button>\r\n        </div>\r\n      </div>\r\n</div>\r\n<div class=wrapper-md>\r\n\t<div class="panel panel-default">\r\n\t\t<div class="panel-heading font-bold">配置</div>\r\n\t\t<div class=panel-body>\r\n\t\t\t<form name=settingForm class="form-horizontal form-property">\r\n\t\t\t\t<div class=form-group>\r\n\t\t\t\t\t<label class="col-sm-5 control-label">邮件服务器</label>\r\n\t\t\t\t\t<div class=col-sm-7>\r\n\t\t\t\t\t\t<input ng-model=appSetting.host required class=form-control>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="line line-dashed b-b line-lg"></div>\r\n\t\t\t\t<div class=form-group>\r\n\t\t\t\t\t<label class="col-sm-5 control-label">账号</label>\r\n\t\t\t\t\t<div class=col-sm-7>\r\n\t\t\t\t\t\t<input type=email ng-model=appSetting.username required class=form-control>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="line line-dashed b-b line-lg"></div>\r\n\t\t\t\t<div class=form-group>\r\n\t\t\t\t\t<label class="col-sm-5 control-label">密码</label>\r\n\t\t\t\t\t<div class=col-sm-7>\r\n\t\t\t\t\t\t<input ng-model=appSetting.password required class=form-control>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t</div>\r\n</div></div>'),t.put("asset/tpl/dashboard/system/notice.html",'<div ng-controller=NoticeCtrl class=app-ctrl>\r\n<div class="bg-light lter b-b wrapper-md app-title-fixed">\r\n<div class=row>\r\n        <div class="col-sm-6 col-xs-6">\r\n          <h1 class="m-n font-thin h3" style="line-height: 34px">系统通知</h1>\r\n        </div>\r\n        <div class="col-sm-6 col-xs-6 text-right">\r\n          <button class="btn btn-primary" ng-disabled="settingForm.$invalid || !settingForm.$dirty" ng-click=save()>保存</button>\r\n          <button class="btn btn-default" ng-disabled=!settingForm.$dirty ng-click=reset()>重置</button>\r\n        </div>\r\n      </div>\r\n</div>\r\n<div class=wrapper-md>\r\n\t<div class="panel panel-default">\r\n\t\t<div class="panel-heading font-bold">配置</div>\r\n\t\t<div class=panel-body>\r\n\t\t\t<form name=settingForm class="form-horizontal form-property">\r\n\t\t\t\t<div class=form-group>\r\n\t\t\t\t\t<label class="col-sm-3 control-label">是否显示通知</label>\r\n\t\t\t\t\t<div class=col-sm-9>\r\n\t\t\t\t\t\t<label class="i-switch m-t-xs m-r bg-primary">\r\n\t\t\t              <input type=checkbox ng-checked=appSetting.enable ng-model=notice.enable>\r\n\t\t\t              <i></i>\r\n\t\t\t            </label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="line line-dashed b-b line-lg pull-in"></div>\r\n\t\t\t\t<div class=form-group>\r\n\t\t\t\t\t<label class="col-sm-3 control-label">显示时间</label>\r\n\t\t\t\t\t<div class=col-sm-9>\r\n\t\t\t\t\t\t <input name=start class="form-control input-sm w-sm inline" ng-click="startOpended = true" date-format=YYYY-MM-DD ng-model=notice.startDate datepicker-popup=yyyy-MM-dd is-open=startOpended datepicker-options="{formatYear: \'yyyy\',class:\'datepicker\',showWeeks:false}" close-text=关闭 current-text=今天 clear-text=清除>\r\n\t\t\t\t\t     - \r\n\t\t\t\t\t    <input name=end class="form-control input-sm w-sm inline" date-format=YYYY-MM-DD ng-click="endOpened = true" ng-model=notice.endDate datepicker-popup=yyyy-MM-dd is-open=endOpened datepicker-options="{formatYear: \'yyyy\',class:\'datepicker\',showWeeks:false}" close-text=关闭 current-text=今天 clear-text=清除>\r\n\t\t\t\t\t\t<span class="help-block m-b-none">设置通知显示的时间段</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="line line-dashed b-b line-lg pull-in"></div>\r\n\t\t\t\t<div class=form-group>\r\n\t\t\t\t\t<label class="col-sm-3 control-label m-b-sm">标题</label>\r\n\t\t\t\t\t<div class=col-sm-9>\r\n\t\t\t\t\t\t<input name=noticeTitle ng-model=notice.title class=form-control>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="line line-dashed b-b line-lg pull-in"></div>\r\n\t\t\t\t<div class=form-group>\r\n\t\t\t\t\t<label class="col-sm-3 control-label">内容</label>\r\n\t\t\t\t\t<div class=col-sm-9>\r\n\t\t\t\t\t\t<textarea class=form-control name=setting.noticeContent ng-model=notice.content rows=10></textarea>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t</div>\r\n</div></div>'),t.put("asset/tpl/dashboard/system/setting.html",'<div ng-controller=SettingCtrl class=app-ctrl>\r\n    <div class="bg-light lter b-b wrapper-md app-title-fixed">\r\n        <div class=row>\r\n            <div class="col-sm-6 col-xs-6">\r\n                <h1 class="m-n font-thin h3">系统设置</h1>\r\n            </div>\r\n            <div class="col-sm-6 col-xs-6" style="text-align: right">\r\n                <button class="btn btn-primary" ng-disabled="securitySettingForm.$invalid || !securitySettingForm.$dirty" ng-click=save()>保存\r\n                </button>\r\n                <button class="btn btn-default" ng-disabled=!securitySettingForm.$dirty ng-click=reset()>重置\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="wrapper-md app-inner">\r\n        <form name=securitySettingForm class="form-horizontal form-property">\r\n            <div class="panel panel-default">\r\n                <div class="panel-heading font-bold">登录设置</div>\r\n                <div class=panel-body>\r\n                    <div class=form-group>\r\n                        <label class="col-sm-5 control-label">登录失败次数限制</label>\r\n                        <div class=col-sm-7>\r\n                            <input type=number ng-model=setting.loginFailLimit min=3 class=form-control style="width: 100px"> <span class="help-block m-b-none">登录失败次数超过设置次数则禁止登录并锁定账户，用户登录成功后清除失败次数</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="line line-dashed b-b line-lg"></div>\r\n                    <div class=form-group>\r\n                        <label class="col-sm-5 control-label">是否需要输入验证码</label>\r\n                        <div class=col-sm-7>\r\n                            <label class="i-switch bg-primary m-t-xs m-r"> <input type=checkbox ng-checked=setting.showCaptcha ng-model=setting.showCaptcha> <i></i>\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                    <div class="line line-dashed b-b line-lg" ng-show=setting.showCaptcha></div>\r\n                    <div class="form-group fade-in" ng-show=setting.showCaptcha>\r\n                        <label class="col-sm-5 control-label">只在异常登录情况下输入</label>\r\n                        <div class=col-sm-7>\r\n                            <label class="i-switch bg-primary m-t-xs m-r"> <input type=checkbox ng-checked=setting.showCaptchaOnError ng-model=setting.showCaptchaOnError> <i></i>\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                    <div class="line line-dashed b-b line-lg" ng-show=setting.showCaptcha></div>\r\n                    <div class="form-group fade-in" ng-show=setting.showCaptcha>\r\n                        <label class="col-sm-5 control-label">验证码长度</label>\r\n                        <div class=col-sm-7>\r\n                            <input type=number min=4 max=8 class=form-control required style="width: 100px" ng-model=setting.captchaLength> <span class="help-block m-b-none">生成验证码长度，最短长度4位，最长为8位</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="panel panel-default">\r\n                <div class="panel-heading font-bold">密码策略</div>\r\n                <div class=panel-body>\r\n                    <div class=form-group>\r\n                        <label class="col-sm-5 control-label">默认密码</label>\r\n                        <div class=col-sm-7>\r\n                            <input ng-minlength=4 maxlength=20 class=form-control style="width: 150px" ng-model=setting.defaultPassword> <span class="help-block m-b-none">控制台添加用户默认的密码，用户第一次登录需要修改密码，最短4位，最长20位</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="line line-dashed b-b line-lg"></div>\r\n                    <div class=form-group>\r\n                        <label class="col-sm-5 control-label">密码长度</label>\r\n                        <div class=col-sm-7>\r\n                            <input type=number min=4 class=form-control style="width: 100px" ng-model=setting.minLengthOfPassword> <span class="help-block m-b-none">限制用户密码的最短长度，最短长度4位</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="line line-dashed b-b line-lg"></div>\r\n                    <div class=form-group>\r\n                        <label class="col-sm-5 control-label">密码强度</label>\r\n                        <div class=col-sm-7>\r\n                            <label class="checkbox-inline i-checks">\r\n                                <input type=radio name=passwordStrength value=1 ng-checked="setting.passwordStrength == 1" ng-model=setting.passwordStrength><i></i>\r\n                                弱\r\n                            </label>\r\n                            <label class="checkbox-inline i-checks">\r\n                                <input type=radio name=passwordStrength value=2 ng-checked="setting.passwordStrength == 2" ng-model=setting.passwordStrength><i></i>\r\n                                普通\r\n                            </label>\r\n                            <label class="checkbox-inline i-checks">\r\n                                <input type=radio name=passwordStrength value=3 ng-checked="setting.passwordStrength == 3" ng-model=setting.passwordStrength><i></i>\r\n                                中等\r\n                            </label>\r\n                            <label class="checkbox-inline i-checks">\r\n                                <input type=radio name=passwordStrength value=4 ng-checked="setting.passwordStrength == 4" ng-model=setting.passwordStrength><i></i>\r\n                                强\r\n                            </label>\r\n                            <div ng-show="setting.passwordStrength ==1" class="alert alert-info" style="margin-bottom: 0px; margin-top: 10px; width: 400px" role=alert>任意密码，只要求限制密码长度\r\n                            </div>\r\n                            <div ng-show="setting.passwordStrength == 2" class="alert alert-info" style="margin-bottom: 0px; margin-top: 10px; width: 400px" role=alert>密码必须为数字和字母组合\r\n                            </div>\r\n                            <div ng-show="setting.passwordStrength == 3" class="alert alert-info" style="margin-bottom: 0px; margin-top: 10px; width: 400px" role=alert>密码必须为数字和字母组合，且必须含有大小写字母\r\n                            </div>\r\n                            <div ng-show="setting.passwordStrength == 4" class="alert alert-info" style="margin-bottom: 0px; margin-top: 10px; width: 400px" role=alert>密码必须为数字和字母组合，且必须含有大小写字母和特殊字符\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="panel panel-default">\r\n                <div class="panel-heading font-bold">上传设置</div>\r\n                <div class=panel-body>\r\n                    <div class=form-group>\r\n                        <label class="col-sm-5 control-label">文件大小限制</label>\r\n                        <div class=col-sm-7>\r\n                            <input type=number ng-model=setting.maxUploadFileSize min=0 class=form-control style="width: 100px; display: inline"> MB\r\n                            <div ng-show="(setting.maxUploadFileSize > 2048)" class="alert alert-danger" style="margin-bottom: 0px; margin-top: 5px; width: 200px" role=alert>最大限制不能超过2G\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="line line-dashed b-b line-lg"></div>\r\n                    <div class=form-group>\r\n                        <label class="col-sm-5 control-label">文件分片大小</label>\r\n                        <div class=col-sm-7>\r\n                            <input type=number ng-model=setting.multiPartSize min=0 class=form-control style="width: 100px; display: inline"> MB\r\n                            <span class="help-block m-b-none">设置断点续传文件分片大小</span>\r\n                            <div ng-show="(setting.multiPartSize > 50)" class="alert alert-danger" style="margin-bottom: 0px; margin-top: 5px; width: 200px" role=alert>最大限制不能超过50MB\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="line line-dashed b-b line-lg"></div>\r\n                    <div class=form-group>\r\n                        <label class="col-sm-5 control-label">允许上传的文件后缀</label>\r\n                        <div class=col-sm-7>\r\n                            <input class=form-control style="width: 300px" ng-model=setting.includeExtensions>\r\n                            <span class="help-block m-b-none">填写文件后缀，多个后缀使用“;”进行连接，例如：doc;docx;xls</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="line line-dashed b-b line-lg"></div>\r\n                    <div class=form-group>\r\n                        <label class="col-sm-5 control-label">禁止上传的文件后缀</label>\r\n                        <div class=col-sm-7>\r\n                            <input class=form-control style="width: 300px" ng-model=setting.excludeExtensions> <span class="help-block m-b-none">填写文件后缀，多个后缀使用“;”进行连接，例如:exe;bat</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="line line-dashed b-b line-lg"></div>\r\n                    <div class=form-group>\r\n                        <label class="col-sm-5 control-label">允许上传的文件类型</label>\r\n                        <div class=col-sm-7>\r\n                            <textarea rows=6 class=form-control style="width: 300px" ng-model=setting.includeContentTypes>\r\n                            </textarea>\r\n                            <span class="help-block m-b-none">填写文件类型，多个类型请换行填写</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="line line-dashed b-b line-lg"></div>\r\n                    <div class=form-group>\r\n                        <label class="col-sm-5 control-label">禁止上传的文件类型</label>\r\n                        <div class=col-sm-7>\r\n                            <textarea rows=6 class=form-control style="width: 300px" ng-model=setting.excludeContentTypes>\r\n                            </textarea>\r\n                            <span class="help-block m-b-none">填写文件类型，多个类型请换行填写</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="panel panel-default">\r\n                <div class="panel-heading font-bold">文件设置</div>\r\n                <div class=panel-body>\r\n                    \r\n                    <div class=form-group>\r\n                        <label class="col-sm-5 control-label">开启水印</label>\r\n                        <div class=col-sm-7>\r\n                            <label class="i-switch bg-primary m-t-xs m-r"> <input type=checkbox ng-checked=setting.enableWatermark ng-model=setting.enableWatermark> <i></i>\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                    <div class="line line-dashed b-b line-lg hidden" ng-show=setting.enableWatermark></div>\r\n                    <div class=form-group ng-show=setting.enableWatermark>\r\n                        <label class="col-sm-5 control-label">水印内容</label>\r\n                        <div class=col-sm-7>\r\n                            <label class="checkbox-inline i-checks"> <input type=checkbox ng-checked=watermarkProperties.name ng-model=watermarkProperties.name><i></i> 姓名\r\n                            </label> <label class="checkbox-inline i-checks"> <input type=checkbox ng-checked=watermarkProperties.dept ng-model=watermarkProperties.dept><i></i> 部门\r\n                        </label> <label class="checkbox-inline i-checks"> <input type=checkbox ng-checked=watermarkProperties.date ng-model=watermarkProperties.date><i></i> 日期\r\n                        </label> <label class="checkbox-inline i-checks"> <input type=checkbox ng-checked=watermarkProperties.time ng-model=watermarkProperties.time><i></i> 时间\r\n                        </label> <label class="checkbox-inline i-checks"> <input type=checkbox ng-checked=watermarkProperties.fileName ng-model=watermarkProperties.fileName><i></i>\r\n                            文件名称\r\n                        </label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>'),t.put("asset/tpl/dashboard/system/task.html",'<div ng-controller=TaskManagerCtrl class=app-ctrl>\r\n\t<div class="bg-light lter b-b wrapper-md app-title-fixed">\r\n\t\t<div class=row>\r\n\t\t\t<div class="col-sm-6 col-xs-5">\r\n\t\t\t\t<h1 class="m-n font-thin h3" style="line-height: 34px">任务管理</h1>\r\n\t\t\t</div>\r\n\t\t\t<div class="col-sm-6 col-xs-7" style="text-align: right">\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t<button class="btn btn-primary" ng-disabled="status.syncing == true" ng-click=sync()>{{status.syncText}}</button>\r\n\t\t\t\t<button class="btn btn-minor" ng-click=load()>刷新</button>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="wrapper-sm app-inner bg-light lter">\r\n\t\t\t\t<div class="table-responsive h-full" ng-show=!status.loading>\r\n\t\t\t\t\t<table class="table table-hover b-b">\r\n\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<th ng-click="title=\'name\';desc=!desc" width=20%>\r\n\t\t\t\t\t\t\t\t\t任务名称\r\n\t\t\t\t\t\t\t\t \t<i ng-show="title == \'name\'" ng-class="{\'fa-caret-up\' : desc,\'fa-caret-down\':!desc}" class=fa> </i>\r\n\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t<th ng-click="title=\'cronExpression\';desc=!desc" width=20%>执行时间 <i ng-show="title == \'cronExpression\'" ng-class="{\'fa-caret-up\' : desc,\'fa-caret-down\':!desc}" class=fa> </i>\r\n\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t<th ng-click="title=\'nextExecuteDate\';desc=!desc" width=20%>下次运行时间 <i ng-show="title == \'nextExecuteDate\'" ng-class="{\'fa-caret-up\' : desc,\'fa-caret-down\':!desc}" class=fa> </i>\r\n\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t<th ng-click="title=\'status\';desc=!desc" width=10%>状态 <i ng-show="title == \'status\'" ng-class="{\'fa-caret-up\' : desc,\'fa-caret-down\':!desc}" class=fa> </i>\r\n\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t<th width=10%>是否启用</th>\r\n\t\t\t\t\t\t\t\t<th width=20%>操作</th>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\t<input class="input-sm form-control" placeholder="" ng-model=condition.name>\r\n\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\t<input class="input-sm form-control" placeholder="" ng-model=condition.cronExpression>\r\n\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\t<div class=input-group>\r\n\t\t\t\t\t\t\t\t\t <input class="form-control input-sm" datepicker-popup=yyyy-MM-dd ng-model=condition.nextExecuteDate is-open=opened datepicker-options="{formatYear: \'yyyy\',class:\'datepicker\'}" ng-required=true close-text=关闭 current-text=今天 clear-text=清除>\r\n\t\t\t\t\t\t\t\t\t <span class=input-group-btn>\r\n\t\t\t\t\t\t                <button type=button class="btn btn-sm btn-default" ng-click=open($event)><i class="glyphicon glyphicon-calendar"></i></button>\r\n\t\t\t\t\t\t              </span>\r\n\t\t\t\t\t\t              </div>\r\n\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\t<select class="input-sm form-control" ng-model=condition.status>\r\n\t\t\t\t\t\t\t\t\t\t<option></option>\r\n\t\t\t\t\t\t\t\t\t\t<option value=0>执行完成</option>\r\n\t\t\t\t\t\t\t\t\t\t<option value=1>正在执行</option>\r\n\t\t\t\t\t\t\t\t\t\t<option value=2>执行异常</option>\r\n\t\t\t\t\t\t\t\t\t\t<option value=3>准备执行</option>\r\n\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\t<select class="input-sm form-control" ng-model=condition.enable>\r\n\t\t\t\t\t\t\t\t\t\t<option></option>\r\n\t\t\t\t\t\t\t\t\t\t<option value=0>是</option>\r\n\t\t\t\t\t\t\t\t\t\t<option value=1>否</option>\r\n\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t<tr ng-repeat="task in tasks | filter:{name:condition.name,cronExpression:condition.cronExpression,nextExecuteDate:condition.nextExecuteDate,status:condition.status,enable:condition.enable}  | orderBy: title : desc" valign=middle>\r\n\t\t\t\t\t\t\t\t<td style="padding-top: 12px">{{task.name}}</td>\r\n\t\t\t\t\t\t\t\t<td style="padding-top: 12px">{{task.cronExpression}}</td>\r\n\t\t\t\t\t\t\t\t<td style="padding-top: 12px">{{task.nextExecuteDate}}</td>\r\n\t\t\t\t\t\t\t\t<td style="padding-top: 12px">{{task.status |\r\n\t\t\t\t\t\t\t\t\ttranslate:\'system.task.status\'}}</td>\r\n\t\t\t\t\t\t\t\t<td style="padding-top: 12px">{{task.enable |\r\n\t\t\t\t\t\t\t\t\ttranslate:\'common.YN\'}}</td>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t<button class="btn btn-default btn-sm" ng-show="task.enable == false">启用</button>\r\n\t\t\t\t\t\t\t\t\t<button class="btn btn-default btn-sm" ng-show="task.enable == true">禁用</button>\r\n\t\t\t\t\t\t\t\t\t<button class="btn btn-default btn-sm" ng-show="task.status != 1">执行</button> \r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n')}]);